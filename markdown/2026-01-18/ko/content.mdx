# useCallback, useMemoëŠ” ì™œ ì“¸ê¹Œ

Reactì—ì„œ useCallbackê³¼ useMemoë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ë‹¨ìˆœíˆ "ì„±ëŠ¥ ìµœì í™”"ê°€ ì•„ë‹™ë‹ˆë‹¤. JavaScriptì˜ ì°¸ì¡°í˜• ë°ì´í„° íŠ¹ì„±ê³¼ Reactì˜ ì˜ì¡´ì„± ë°°ì—´ ë™ì‘ ë°©ì‹ì„ ì´í•´í•˜ë©´, ì´ í›…ë“¤ì´ ì™œ í•„ìˆ˜ì ì¸ ìƒí™©ì´ ìˆëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ ë¬¸ì„œë¥¼ ì½ìœ¼ë©´ ë‹¤ìŒì„ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
- ì›ì‹œí˜•ê³¼ ì°¸ì¡°í˜•ì˜ ë©”ëª¨ë¦¬ ë™ì‘ ì°¨ì´
- useEffect ì˜ì¡´ì„± ë°°ì—´ì—ì„œ ì°¸ì¡°í˜•ì´ ìœ„í—˜í•œ ì´ìœ 
- ESLintê°€ ê²½ê³ í•˜ì§€ ëª»í•˜ëŠ” ì»¤ìŠ¤í…€ í›… ë‚´ë¶€ì˜ í•¨ì •
- ì°¸ì¡°í˜• ë°ì´í„°ì˜ ë©”ëª¨ì´ì œì´ì…˜ ì„¤ê³„ ì›ì¹™

---

# ì›ì‹œí˜•ê³¼ ì°¸ì¡°í˜•ì˜ ë©”ëª¨ë¦¬ êµ¬ì¡°

JavaScriptì˜ ë°ì´í„° íƒ€ì…ì€ ì›ì‹œí˜•(Primitive)ê³¼ ì°¸ì¡°í˜•(Reference)ìœ¼ë¡œ ë‚˜ë‰©ë‹ˆë‹¤.

## ì›ì‹œí˜• ë°ì´í„°

ì›ì‹œí˜•ì€ ê°’ ìì²´ê°€ ë©”ëª¨ë¦¬ ì£¼ì†Œì— ì§ì ‘ ì €ì¥ë©ë‹ˆë‹¤. ë³€ìˆ˜ëŠ” ê·¸ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ê°€ë¦¬í‚¤ë©°, ê·¸ ì£¼ì†Œì— ê°’ì´ ì €ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

```javascript
let a = 1;
let b = 1;

console.log(a === b); // true
```

**ë©”ëª¨ë¦¬ êµ¬ì¡°:**

```mermaid
flowchart TB
    subgraph Memory["ë©”ëª¨ë¦¬"]
        direction TB
        A1["ë©”ëª¨ë¦¬ ì£¼ì†Œ @100<br/>ê°’: 1"]
        B1["ë©”ëª¨ë¦¬ ì£¼ì†Œ @200<br/>ê°’: 1"]
    end
    
    subgraph Variables["ë³€ìˆ˜"]
        direction TB
        A2["ë³€ìˆ˜ a â†’ @100"]
        B2["ë³€ìˆ˜ b â†’ @200"]
    end
    
    A2 --> A1
    B2 --> B1
    
    Note1["ì›ì‹œí˜• ë°ì´í„°ëŠ”<br/>ë©”ëª¨ë¦¬ ì£¼ì†Œì— ê°’ì´ ì§ì ‘ ì €ì¥ë¨"]
    
    Memory --> Note1
```

`a`ëŠ” ë©”ëª¨ë¦¬ ì£¼ì†Œ @100ì„ ê°€ë¦¬í‚¤ê³ , ê·¸ ì£¼ì†Œì— ê°’ `1`ì´ ì§ì ‘ ì €ì¥ë©ë‹ˆë‹¤. `b`ëŠ” ë©”ëª¨ë¦¬ ì£¼ì†Œ @200ì„ ê°€ë¦¬í‚¤ê³ , ê·¸ ì£¼ì†Œì— ê°’ `1`ì´ ì§ì ‘ ì €ì¥ë©ë‹ˆë‹¤. ë¹„êµ ì—°ì‚°ì(`===`)ëŠ” ì €ì¥ëœ ê°’ ìì²´ë¥¼ ë¹„êµí•˜ë¯€ë¡œ `true`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

**í•µì‹¬:**
- ì›ì‹œí˜• ë°ì´í„°ëŠ” í•´ë‹¹ ë°ì´í„°ë¥¼ ë‹´ëŠ” ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤
- ë©”ëª¨ë¦¬ ì£¼ì†Œì— ê°’ì´ ì§ì ‘ ì €ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤

## ì°¸ì¡°í˜• ë°ì´í„°

ì°¸ì¡°í˜•ì€ ê°ì²´ë¥¼ ìœ„í•œ ë©”ëª¨ë¦¬ ì£¼ì†Œê°€ ìˆê³ , ê·¸ ì£¼ì†Œë¡œ ê°€ë©´ ê°ì²´ ë‚´ë¶€ì˜ ì›ì‹œí˜• ë°ì´í„°ë“¤ì´ ê°ê°ì˜ ë©”ëª¨ë¦¬ ìœ„ì¹˜ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.

```javascript
const obj1 = { value: 1 };
const obj2 = { value: 1 };

console.log(obj1 === obj2); // false
```

**ë©”ëª¨ë¦¬ êµ¬ì¡°:**

```mermaid
flowchart TB
    subgraph Variables["ë³€ìˆ˜"]
        direction TB
        V1["ë³€ìˆ˜ obj1 â†’ @1000"]
        V2["ë³€ìˆ˜ obj2 â†’ @2000"]
    end
    
    subgraph Heap["í™ ë©”ëª¨ë¦¬"]
        direction TB
        subgraph O1["ê°ì²´ @1000"]
            direction TB
            P1["@1000+0x00: value<br/>ê°’: 1<br/>(ì›ì‹œí˜• ìˆ«ì)"]
        end
        
        subgraph O2["ê°ì²´ @2000"]
            direction TB
            P2["@2000+0x00: value<br/>ê°’: 1<br/>(ì›ì‹œí˜• ìˆ«ì)"]
        end
    end
    
    V1 -->|"ì°¸ì¡°"| O1
    V2 -->|"ì°¸ì¡°"| O2
    
    Note1["ê°ì²´ ì£¼ì†Œ(@1000)ë¡œ ê°€ë©´<br/>ë‚´ë¶€ ì›ì‹œí˜• ê°’ë“¤ì´<br/>ê°ê°ì˜ ë©”ëª¨ë¦¬ ìœ„ì¹˜ë¥¼ ê°€ì§"]
    
    O1 -.-> Note1
    O2 -.-> Note1
```

`obj1`ì€ ê°ì²´ ì£¼ì†Œ @1000ì„ ê°€ë¦¬í‚¤ê³ , ê·¸ ì£¼ì†Œë¡œ ê°€ë©´ ë‚´ë¶€ì˜ `value` í”„ë¡œí¼í‹°ê°€ ë©”ëª¨ë¦¬ ìœ„ì¹˜ @1000+0x00ì— ì €ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤. `obj2`ëŠ” ê°ì²´ ì£¼ì†Œ @2000ì„ ê°€ë¦¬í‚¤ê³ , ë‚´ë¶€ì˜ `value`ëŠ” @2000+0x00ì— ì €ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë¹„êµ ì—°ì‚°ì(`===`)ëŠ” ê°ì²´ ì£¼ì†Œë¥¼ ë¹„êµí•˜ë¯€ë¡œ `false`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

**í•µì‹¬:**
- ì°¸ì¡°í˜• ë°ì´í„°ëŠ” ê°ì²´ë¥¼ ìœ„í•œ ë©”ëª¨ë¦¬ ì£¼ì†Œê°€ ìˆìŠµë‹ˆë‹¤
- ê·¸ ì£¼ì†Œë¡œ ê°€ë©´ ê°ì²´ ë‚´ë¶€ì˜ ì›ì‹œí˜• ë°ì´í„°ë“¤ì´ ê°ê°ì˜ ë©”ëª¨ë¦¬ ìœ„ì¹˜ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤

### ë©”ëª¨ë¦¬ êµ¬ì¡° ìƒì„¸ ì˜ˆì‹œ

ë” ë³µì¡í•œ ì˜ˆì‹œë¡œ ë©”ëª¨ë¦¬ êµ¬ì¡°ë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

```javascript
const user = { name: 'Kim', age: 25 };
```

**3ë‹¨ê³„: ê°ì²´ ë‚´ë¶€ êµ¬ì¡°**

ê°ì²´ ë‚´ë¶€ì˜ ì›ì‹œí˜• ê°’ë“¤ë„ ê°ê°ì˜ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ê°€ì§‘ë‹ˆë‹¤. ê°ì²´ ì£¼ì†Œ(@1000)ë¡œ ê°€ë©´ ë‚´ë¶€ì˜ ì›ì‹œí˜• ê°’ë“¤ì´ ê°ê°ì˜ ë©”ëª¨ë¦¬ ìœ„ì¹˜ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.

```mermaid
flowchart TB
    subgraph Variables["ë³€ìˆ˜"]
        V1["ë³€ìˆ˜ user â†’ @1000"]
    end
    
    subgraph Heap["í™ ë©”ëª¨ë¦¬"]
        direction TB
        subgraph Object["ê°ì²´ @1000"]
            direction TB
            P1["@1000+0x00: name<br/>ê°’: 'Kim'<br/>(ì›ì‹œí˜• ë¬¸ìì—´)"]
            P2["@1000+0x10: age<br/>ê°’: 25<br/>(ì›ì‹œí˜• ìˆ«ì)"]
        end
    end
    
    V1 -->|"ì°¸ì¡°"| Object
    Object --> P1
    Object --> P2
    
    Note1["ê°ì²´ ì£¼ì†Œ(@1000)ë¡œ ê°€ë©´<br/>ë‚´ë¶€ ì›ì‹œí˜• ê°’ë“¤ì´<br/>ê°ê°ì˜ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ê°€ì§"]
    
    Object -.-> Note1
```

**ì¤‘ì²© ê°ì²´ ì˜ˆì‹œ:**

```javascript
const user = {
  name: 'Kim',
  address: { city: 'Seoul', zip: '12345' }
};
```

```mermaid
flowchart TB
    subgraph Variables["ë³€ìˆ˜"]
        V1["ë³€ìˆ˜ user â†’ @1000"]
    end
    
    subgraph Heap["í™ ë©”ëª¨ë¦¬"]
        direction TB
        subgraph O1["ê°ì²´ @1000"]
            direction TB
            P1["@1000+0x00: name<br/>ê°’: 'Kim'<br/>(ì›ì‹œí˜•)"]
            P2["@1000+0x10: address<br/>ê°’: @2000<br/>(ì°¸ì¡°í˜• ì£¼ì†Œ)"]
        end
        
        subgraph O2["ê°ì²´ @2000"]
            direction TB
            P3["@2000+0x00: city<br/>ê°’: 'Seoul'<br/>(ì›ì‹œí˜•)"]
            P4["@2000+0x10: zip<br/>ê°’: '12345'<br/>(ì›ì‹œí˜•)"]
        end
    end
    
    V1 -->|"ì°¸ì¡°"| O1
    P2 -->|"ì°¸ì¡°"| O2
    
    Note1["ê° ê°ì²´ ë‚´ë¶€ì˜<br/>ì›ì‹œí˜• ê°’ë“¤ì´<br/>ê°ê°ì˜ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ê°€ì§"]
    
    O1 -.-> Note1
    O2 -.-> Note1
```

### ì›ì‹œí˜• vs ì°¸ì¡°í˜• ë¹„êµ

ì´ì œ ì›ì‹œí˜•ê³¼ ì°¸ì¡°í˜•ì˜ ë©”ëª¨ë¦¬ ë™ì‘ ì°¨ì´ë¥¼ í•œëˆˆì— ë¹„êµí•´ë³´ê² ìŠµë‹ˆë‹¤.

```javascript
// ì›ì‹œí˜• ì˜ˆì‹œ
let a = 1;
let b = 1;
console.log(a === b); // true

// ì°¸ì¡°í˜• ì˜ˆì‹œ
const obj1 = { value: 1 };
const obj2 = { value: 1 };
console.log(obj1 === obj2); // false
```

```mermaid
flowchart TB
    subgraph ì›ì‹œí˜•["ì›ì‹œí˜• (Primitive)"]
        direction TB
        subgraph Stack1["ìŠ¤íƒ (Stack)"]
            A["ë³€ìˆ˜ a<br/>ê°’: 1<br/>(ì§ì ‘ ì €ì¥)"]
            B["ë³€ìˆ˜ b<br/>ê°’: 1<br/>(ì§ì ‘ ì €ì¥)"]
        end
        Compare1["ë¹„êµ: a === b<br/>ê°’ ë¹„êµ â†’ true"]
        Note1["ê° ë³€ìˆ˜ëŠ” ë…ë¦½ì ì¸<br/>ë©”ëª¨ë¦¬ ê³µê°„ì— ê°’ ì €ì¥"]
    end

    subgraph ì°¸ì¡°í˜•["ì°¸ì¡°í˜• (Reference)"]
        direction TB
        subgraph Stack2["ìŠ¤íƒ (Stack)"]
            C["ë³€ìˆ˜ obj1<br/>ì£¼ì†Œ: @100"]
            D["ë³€ìˆ˜ obj2<br/>ì£¼ì†Œ: @200"]
        end
        subgraph Heap2["í™ (Heap)"]
            O1["@100<br/>{ value: 1 }"]
            O2["@200<br/>{ value: 1 }"]
        end
        Compare2["ë¹„êµ: obj1 === obj2<br/>ì£¼ì†Œ ë¹„êµ â†’ false"]
        Note2["ìŠ¤íƒì—ëŠ” ì£¼ì†Œë§Œ ì €ì¥<br/>í™ì— ì‹¤ì œ ê°ì²´ ì €ì¥"]
    end

    Stack1 --> Compare1
    Compare1 --> Note1
    
    Stack2 --> Compare2
    C --> O1
    D --> O2
    Compare2 --> Note2
```

**í•µì‹¬ ì°¨ì´ì  ìš”ì•½:**

| êµ¬ë¶„ | ì›ì‹œí˜• | ì°¸ì¡°í˜• |
|------|--------|--------|
| **ì €ì¥ ìœ„ì¹˜** | ìŠ¤íƒì— ê°’ ì§ì ‘ ì €ì¥ | í™ì— ê°ì²´ ì €ì¥, ìŠ¤íƒì—ëŠ” ì£¼ì†Œë§Œ |
| **í• ë‹¹ ë°©ì‹** | ê°’ ë³µì‚¬ (Pass by Value) | ì£¼ì†Œ ë³µì‚¬ (Pass by Reference) |
| **ë¹„êµ ì—°ì‚°** | ê°’ ìì²´ë¥¼ ë¹„êµ | ì£¼ì†Œë¥¼ ë¹„êµ |
| **ë…ë¦½ì„±** | ê° ë³€ìˆ˜ëŠ” ë…ë¦½ì ì¸ ê°’ | ê°™ì€ ì£¼ì†Œë¥¼ ê°€ë¦¬í‚¤ë©´ ê³µìœ  |
| **ë©”ëª¨ë¦¬** | ê³ ì • í¬ê¸°, ë¹ ë¥¸ ì ‘ê·¼ | ë™ì  í¬ê¸°, ëŠë¦° ì ‘ê·¼ |

**ì‹¤ì œ ë™ì‘ ì˜ˆì‹œ:**

```javascript
// ì›ì‹œí˜•: ê°’ ë³µì‚¬
let x = 10;
let y = x;  // yëŠ” 10ì˜ ë³µì‚¬ë³¸
y = 20;     // yë§Œ ë³€ê²½
console.log(x); // 10 (xëŠ” ì˜í–¥ ì—†ìŒ)

// ì°¸ì¡°í˜•: ì£¼ì†Œ ë³µì‚¬
let objA = { count: 10 };
let objB = objA;  // objBëŠ” objAì˜ ì£¼ì†Œ ë³µì‚¬
objB.count = 20;  // ê°™ì€ ê°ì²´ë¥¼ ìˆ˜ì •
console.log(objA.count); // 20 (objAë„ ì˜í–¥ë°›ìŒ)
```

## í•¨ìˆ˜ë„ ì°¸ì¡°í˜•ì…ë‹ˆë‹¤

í•¨ìˆ˜ëŠ” JavaScriptì—ì„œ ì¼ê¸‰ ê°ì²´ì´ë©°, ì°¸ì¡°í˜• ë°ì´í„°ì…ë‹ˆë‹¤.

```javascript
const fn1 = () => console.log('hello');
const fn2 = () => console.log('hello');

console.log(fn1 === fn2); // false
```

ë™ì¼í•œ ì½”ë“œë¥¼ ê°€ì§„ í•¨ìˆ˜ë¼ë„ ì„ ì–¸í•  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ë©”ëª¨ë¦¬ ì£¼ì†Œê°€ í• ë‹¹ë©ë‹ˆë‹¤.

## JavaScript íƒ€ì…ë³„ ë¶„ë¥˜

```mermaid
flowchart TB
    subgraph ì›ì‹œí˜•["ì›ì‹œí˜• (Primitive)"]
        P1[number]
        P2[string]
        P3[boolean]
        P4[null]
        P5[undefined]
        P6[symbol]
        P7[bigint]
    end

    subgraph ì°¸ì¡°í˜•["ì°¸ì¡°í˜• (Reference)"]
        R1[Object]
        R2[Array]
        R3[Function]
        R4[Date]
        R5[Map / Set]
        R6[RegExp]
    end

    ì›ì‹œí˜• -->|"ê°’ ë¹„êµ"| SAFE["depsì—ì„œ ì•ˆì „"]
    ì°¸ì¡°í˜• -->|"ì£¼ì†Œ ë¹„êµ"| DANGER["depsì—ì„œ ì£¼ì˜ í•„ìš”"]
```

---

# useEffect ì˜ì¡´ì„± ë°°ì—´ê³¼ ì°¸ì¡°í˜•ì˜ í•¨ì •

Reactì˜ useEffectëŠ” ì˜ì¡´ì„± ë°°ì—´ì˜ ê°’ì´ ë³€ê²½ë  ë•Œ ì½œë°±ì„ ì‹¤í–‰í•©ë‹ˆë‹¤. ë¬¸ì œëŠ” ì´ ë¹„êµê°€ `Object.is`ë¡œ ìˆ˜í–‰ëœë‹¤ëŠ” ì ì…ë‹ˆë‹¤.

## ì›ì‹œí˜•ì€ ì•ˆì „í•©ë‹ˆë‹¤

```jsx
function Counter() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    console.log('count ë³€ê²½:', count);
  }, [count]);

  return <button onClick={() => setCount(count + 1)}>ì¦ê°€</button>;
}
```

`count`ëŠ” ì›ì‹œí˜•(ìˆ«ì)ì´ë¯€ë¡œ ê°’ì´ ì‹¤ì œë¡œ ë³€ê²½ë  ë•Œë§Œ effectê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.

## ì°¸ì¡°í˜•ì€ ìœ„í—˜í•©ë‹ˆë‹¤

```jsx
function UserProfile() {
  const [user, setUser] = useState({ name: 'Kim' });

  // ë§¤ ë Œë”ë§ë§ˆë‹¤ ìƒˆë¡œìš´ ê°ì²´ ìƒì„±
  const config = { theme: 'dark' };

  useEffect(() => {
    console.log('config ë³€ê²½ë¨');
  }, [config]); // ë§¤ ë Œë”ë§ë§ˆë‹¤ ì‹¤í–‰ë¨

  return <div>{user.name}</div>;
}
```

`config`ëŠ” ë Œë”ë§ë§ˆë‹¤ ìƒˆë¡œìš´ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ê°€ì§„ ê°ì²´ë¡œ ìƒì„±ë©ë‹ˆë‹¤. ë‚´ìš©ì´ ë™ì¼í•´ë„ ReactëŠ” "ë³€ê²½ë¨"ìœ¼ë¡œ íŒë‹¨í•©ë‹ˆë‹¤.

```mermaid
sequenceDiagram
    participant R as React
    participant C as Component
    participant E as useEffect

    R->>C: ì²« ë²ˆì§¸ ë Œë”ë§
    C->>C: config = { theme: 'dark' } @100
    C->>E: deps ì €ì¥: [@100]
    E->>E: effect ì‹¤í–‰

    R->>C: ë‘ ë²ˆì§¸ ë Œë”ë§ (ìƒíƒœ ë³€ê²½)
    C->>C: config = { theme: 'dark' } @200
    C->>E: deps ë¹„êµ: @100 !== @200
    E->>E: effect ë˜ ì‹¤í–‰ (ë¶ˆí•„ìš”)
```

## ë¬´í•œ ë¦¬ë Œë”ë§ ë°œìƒ ì¼€ì´ìŠ¤

ì‹¤ì œ í”„ë¡œì íŠ¸ì—ì„œ í”íˆ ë°œìƒí•˜ëŠ” íŒ¨í„´ì…ë‹ˆë‹¤. í•¨ìˆ˜ë¥¼ ì˜ì¡´ì„± ë°°ì—´ì— ë„£ê³  effect ë‚´ë¶€ì—ì„œ ìƒíƒœë¥¼ ë³€ê²½í•˜ë©´ ë¬´í•œ ë£¨í”„ê°€ ë°œìƒí•©ë‹ˆë‹¤.

```jsx
function SearchPage() {
  const [keyword, setKeyword] = useState('');
  const [searchCount, setSearchCount] = useState(0);

  // ë§¤ ë Œë”ë§ë§ˆë‹¤ ìƒˆë¡œìš´ í•¨ìˆ˜ ìƒì„±
  const inlineSaveDraft = () => {
    console.log('ê²€ìƒ‰ ì‹¤í–‰:', keyword);
  };

  useEffect(() => {
    if (keyword) {
      inlineSaveDraft();
      setSearchCount((prev) => prev + 1); // ê²€ìƒ‰ íšŸìˆ˜ ì¶”ì  â†’ ë¦¬ë Œë”ë§ ìœ ë°œ
    }
  }, [inlineSaveDraft, keyword]); // ë¬´í•œ ë£¨í”„!

  return (
    <>
      <input value={keyword} onChange={(e) => setKeyword(e.target.value)} placeholder="ê²€ìƒ‰ì–´ ì…ë ¥" />
      <div>ê²€ìƒ‰ íšŸìˆ˜: {searchCount}</div>
    </>
  );
}
```

ì‹¤í–‰ íë¦„:
1. ì‚¬ìš©ìê°€ inputì— ì…ë ¥ â†’ `keyword` ìƒíƒœ ë³€ê²½
2. ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§ â†’ `inlineSaveDraft` í•¨ìˆ˜ ì¬ìƒì„± (@200, ìƒˆ ì£¼ì†Œ)
3. useEffect deps ë¹„êµ: `inlineSaveDraft @100 !== @200` â†’ effect ì‹¤í–‰
4. effect ì‹¤í–‰ â†’ `inlineSaveDraft()` í˜¸ì¶œ â†’ `setSearchCount` ì‹¤í–‰
5. `searchCount` ë³€ê²½ìœ¼ë¡œ ë¦¬ë Œë”ë§ â†’ `inlineSaveDraft` í•¨ìˆ˜ ë˜ ì¬ìƒì„± (@300)
6. useEffect deps ë¹„êµ: `inlineSaveDraft @200 !== @300` â†’ effect ë˜ ì‹¤í–‰
7. 4~6 ë°˜ë³µ (ë¬´í•œ ë£¨í”„)

```mermaid
flowchart LR
    A["ì‚¬ìš©ìê°€ inputì— ì…ë ¥"] --> B["keyword ìƒíƒœ ë³€ê²½"]
    B --> C["ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§"]
    C --> D["inlineSaveDraft í•¨ìˆ˜ ì¬ìƒì„± (ìƒˆ ì£¼ì†Œ @200)"]
    D --> E["useEffect deps ë¹„êµ"]
    E --> F{"inlineSaveDraft ì£¼ì†Œê°€ ë‹¤ë¥¸ê°€?<br/>(@100 !== @200)"}
    F -->|Yes| G["effect ì‹¤í–‰: inlineSaveDraft()"]
    G --> H["setSearchCount í˜¸ì¶œ"]
    H --> I["searchCount ë³€ê²½ â†’ ë¦¬ë Œë”ë§"]
    I --> J["inlineSaveDraft í•¨ìˆ˜ ë˜ ì¬ìƒì„± (ìƒˆ ì£¼ì†Œ @300)"]
    J --> K["useEffect deps ë¹„êµ<br/>(@200 !== @300)"]
    K --> G
    F -->|No| L["effect ê±´ë„ˆëœ€"]
```

### Chrome DevToolsë¡œ í™•ì¸í•œ ë©”ëª¨ë¦¬ ì£¼ì†Œ ë³€í™”

ì‹¤ì œë¡œ í•¨ìˆ˜ê°€ ë§¤ ë Œë”ë§ë§ˆë‹¤ ìƒˆë¡œìš´ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ê°–ëŠ”ì§€ Chrome DevToolsì˜ Memory íƒ­ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì•„ë˜ ìŠ¤í¬ë¦°ìƒ·ì€ Heap Snapshotì„ ë¹„êµí•œ ê²°ê³¼ì…ë‹ˆë‹¤. `inlineSaveDraft` í•¨ìˆ˜ê°€ ê° ìŠ¤ëƒ…ìƒ·ì—ì„œ ë‹¤ë¥¸ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ê°€ì§€ê³  ìˆìŒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**Snapshot 1ì—ì„œì˜ í•¨ìˆ˜ ì£¼ì†Œ:**
![Snapshot 1](/images/2025-01-18/snapshot1.png)

**Snapshot 2ì—ì„œ ìƒˆë¡œ ìƒì„±ëœ í•¨ìˆ˜ë“¤:**
![Snapshot 2](/images/2025-01-18/snapshot2.png)

**Snapshot 3ì—ì„œ ë˜ ë‹¤ë¥¸ ì£¼ì†Œì˜ í•¨ìˆ˜:**
![Snapshot 3](/images/2025-01-18/snapshot3.png)

ê° ìŠ¤ëƒ…ìƒ·ì—ì„œ `inlineSaveDraft` í•¨ìˆ˜ëŠ” `@200175`, `@473745`, `@483163` ë“± ì„œë¡œ ë‹¤ë¥¸ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ê°€ì§‘ë‹ˆë‹¤. ì´ê²ƒì´ Reactê°€ ë§¤ ë Œë”ë§ë§ˆë‹¤ í•¨ìˆ˜ê°€ "ë³€ê²½ë¨"ìœ¼ë¡œ íŒë‹¨í•˜ëŠ” ì´ìœ ì…ë‹ˆë‹¤.

## useCallbackìœ¼ë¡œ í•´ê²°í•˜ê¸°

useCallbackì„ ì‚¬ìš©í•˜ë©´ í•¨ìˆ˜ì˜ ì°¸ì¡°ë¥¼ ì•ˆì •ì ìœ¼ë¡œ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```jsx
function SearchPage() {
  const [keyword, setKeyword] = useState('');
  const [searchCount, setSearchCount] = useState(0);

  // useCallbackìœ¼ë¡œ í•¨ìˆ˜ ì°¸ì¡° ì•ˆì •í™”
  // keywordê°€ ë³€ê²½ë  ë•Œë§Œ í•¨ìˆ˜ ì¬ìƒì„± (searchCount ë³€ê²½ê³¼ ë¬´ê´€)
  const saveDraft = useCallback(() => {
    console.log('ê²€ìƒ‰ ì‹¤í–‰:', keyword);
  }, [keyword]); // keywordê°€ ë³€ê²½ë  ë•Œë§Œ í•¨ìˆ˜ ì¬ìƒì„±

  useEffect(() => {
    if (keyword) {
      saveDraft();
      // searchCountë¥¼ ë³€ê²½í•´ë„ saveDraft ì£¼ì†ŒëŠ” ìœ ì§€ë˜ë¯€ë¡œ effectê°€ ì¬ì‹¤í–‰ë˜ì§€ ì•ŠìŒ
      setSearchCount((prev) => prev + 1);
    }
  }, [saveDraft, keyword]); // saveDraftëŠ” keywordì— ì˜ì¡´í•˜ë¯€ë¡œ keyword ë³€ê²½ ì‹œì—ë§Œ effect ì‹¤í–‰

  return (
    <>
      <input value={keyword} onChange={(e) => setKeyword(e.target.value)} placeholder="ê²€ìƒ‰ì–´ ì…ë ¥" />
      <div>ê²€ìƒ‰ íšŸìˆ˜: {searchCount}</div>
    </>
  );
}
```

#### âŒ ë¬¸ì œ ìƒí™©: useCallback ì—†ì„ ë•Œ

**ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œ:**

```jsx
function SearchPage() {
  const [keyword, setKeyword] = useState('');
  const [searchCount, setSearchCount] = useState(0);

  // âš ï¸ ë§¤ ë Œë”ë§ë§ˆë‹¤ ìƒˆë¡œìš´ í•¨ìˆ˜ ìƒì„± (ë©”ëª¨ì´ì œì´ì…˜ ì—†ìŒ)
  const inlineSaveDraft = () => {
    console.log('ê²€ìƒ‰ ì‹¤í–‰:', keyword);
  };

  useEffect(() => {
    if (keyword) {
      inlineSaveDraft();
      setSearchCount((prev) => prev + 1); // ê²€ìƒ‰ íšŸìˆ˜ ì¶”ì 
    }
  }, [inlineSaveDraft, keyword]); // ë¬´í•œ ë£¨í”„ ë°œìƒ!
}
```

**ì‹¤í–‰ íë¦„:**

```jsx
// 1ë‹¨ê³„: ì‚¬ìš©ìê°€ inputì— "react" ì…ë ¥
<input value={keyword} onChange={(e) => setKeyword(e.target.value)} />
// â†’ setKeyword('react') í˜¸ì¶œ
// â†’ keyword: '' â†’ 'react'

// 2ë‹¨ê³„: ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§
function SearchPage() {
  // 3ë‹¨ê³„: ë§¤ ë Œë”ë§ë§ˆë‹¤ ìƒˆë¡œìš´ í•¨ìˆ˜ ìƒì„±
  const inlineSaveDraft = () => {
    console.log('ê²€ìƒ‰ ì‹¤í–‰:', keyword);
  }; // @100 (ìƒˆ ë©”ëª¨ë¦¬ ì£¼ì†Œ)

  // 4ë‹¨ê³„: useEffect deps ë¹„êµ
  useEffect(() => {
    if (keyword) {
      inlineSaveDraft(); // ì‹¤í–‰
      setSearchCount((prev) => prev + 1); // searchCount: 0 â†’ 1
    }
  }, [inlineSaveDraft, keyword]);
  // ì´ì „ deps: [undefined, ''] (ì²« ë Œë”ë§)
  // í˜„ì¬ deps: [@100, 'react']
  // @100 !== undefined â†’ effect ì‹¤í–‰ âœ…
}

// 5ë‹¨ê³„: searchCount ë³€ê²½ìœ¼ë¡œ ë¦¬ë Œë”ë§ ë°œìƒ
// searchCount: 0 â†’ 1

// 6ë‹¨ê³„: ë¦¬ë Œë”ë§ìœ¼ë¡œ inlineSaveDraft í•¨ìˆ˜ ë˜ ìƒˆë¡œ ìƒì„±
function SearchPage() {
  const inlineSaveDraft = () => {
    console.log('ê²€ìƒ‰ ì‹¤í–‰:', keyword);
  }; // @200 (ìƒˆ ë©”ëª¨ë¦¬ ì£¼ì†Œ, @100ê³¼ ë‹¤ë¦„!)

  // 7ë‹¨ê³„: useEffect deps ë¹„êµ
  useEffect(() => {
    if (keyword) {
      inlineSaveDraft(); // ë˜ ì‹¤í–‰
      setSearchCount((prev) => prev + 1); // searchCount: 1 â†’ 2
    }
  }, [inlineSaveDraft, keyword]);
  // ì´ì „ deps: [@100, 'react']
  // í˜„ì¬ deps: [@200, 'react']
  // @100 !== @200 â†’ effect ë˜ ì‹¤í–‰! âš ï¸
}

// 8ë‹¨ê³„: searchCount ë³€ê²½ìœ¼ë¡œ ë˜ ë¦¬ë Œë”ë§
// searchCount: 1 â†’ 2

// 9ë‹¨ê³„: ë¦¬ë Œë”ë§ìœ¼ë¡œ inlineSaveDraft í•¨ìˆ˜ ë˜ ìƒˆë¡œ ìƒì„±
// @300 ìƒì„± â†’ effect ë˜ ì‹¤í–‰ â†’ searchCount: 2 â†’ 3
// @400 ìƒì„± â†’ effect ë˜ ì‹¤í–‰ â†’ searchCount: 3 â†’ 4
// ... ë¬´í•œ ë°˜ë³µ ğŸ”„
```

**í•µì‹¬ ë¬¸ì œ:**
- `keyword`ëŠ” ë³€ê²½ë˜ì§€ ì•Šì•˜ì§€ë§Œ (`'react'`ë¡œ ë™ì¼)
- `inlineSaveDraft` í•¨ìˆ˜ë§Œ ê³„ì† ìƒˆë¡œ ìƒì„±ë¨ (ë©”ëª¨ë¦¬ ì£¼ì†Œë§Œ ë³€ê²½: @100 â†’ @200 â†’ @300)
- ReactëŠ” deps ë¹„êµ ì‹œ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ë¹„êµí•˜ë¯€ë¡œ (`@100 !== @200`)
- ë§¤ë²ˆ "ë³€ê²½ë¨"ìœ¼ë¡œ íŒë‹¨í•˜ì—¬ effectë¥¼ ì‹¤í–‰
- effect ì‹¤í–‰ â†’ `setSearchCount` â†’ ë¦¬ë Œë”ë§ â†’ í•¨ìˆ˜ ì¬ìƒì„± â†’ effect ì‹¤í–‰ (ë¬´í•œ ë°˜ë³µ)

```mermaid
flowchart LR
    A1["ì‚¬ìš©ìê°€ inputì— ì…ë ¥"] --> B1["keyword ë³€ê²½"]
    B1 --> C1["ë¦¬ë Œë”ë§"]
    C1 --> D1["inlineSaveDraft @100 ìƒì„±"]
    D1 --> E1["effect ì‹¤í–‰ (ì£¼ì†Œ ë³€ê²½ ê°ì§€)"]
    E1 --> F1["setSearchCount â†’ searchCount=1"]
    F1 --> G1["ë¦¬ë Œë”ë§ (searchCount ë³€ê²½)"]
    G1 --> H1["inlineSaveDraft @200 ìƒì„± (ìƒˆ ì£¼ì†Œ)"]
    H1 --> I1["effect ë˜ ì‹¤í–‰ (ì£¼ì†Œ ë³€ê²½ ê°ì§€)"]
    I1 --> J1["setSearchCount â†’ searchCount=2"]
    J1 --> K1["ë¬´í•œ ë£¨í”„!"]
    
    style K1 fill:#ff6b6b,stroke:#c92a2a,color:#fff
    style D1 fill:#ffe3e3,stroke:#ff6b6b
    style H1 fill:#ffe3e3,stroke:#ff6b6b
```

#### âœ… í•´ê²° ë°©ë²•: useCallback ì ìš©

**í•´ê²°ëœ ì½”ë“œ:**

```jsx
function SearchPage() {
  const [keyword, setKeyword] = useState('');
  const [searchCount, setSearchCount] = useState(0);

  // âœ… useCallbackìœ¼ë¡œ í•¨ìˆ˜ ì°¸ì¡° ì•ˆì •í™”
  // keywordê°€ ë³€ê²½ë  ë•Œë§Œ í•¨ìˆ˜ ì¬ìƒì„± (searchCount ë³€ê²½ê³¼ ë¬´ê´€)
  const saveDraft = useCallback(() => {
    console.log('ê²€ìƒ‰ ì‹¤í–‰:', keyword);
  }, [keyword]); // keywordê°€ ë³€ê²½ë  ë•Œë§Œ í•¨ìˆ˜ ì¬ìƒì„±

  useEffect(() => {
    if (keyword) {
      saveDraft();
      // searchCountë¥¼ ë³€ê²½í•´ë„ saveDraft ì£¼ì†ŒëŠ” ìœ ì§€ë˜ë¯€ë¡œ effectê°€ ì¬ì‹¤í–‰ë˜ì§€ ì•ŠìŒ
      setSearchCount((prev) => prev + 1);
    }
  }, [saveDraft, keyword]);
}
```

**ì‹¤í–‰ íë¦„:**

```jsx
// 1ë‹¨ê³„: ì‚¬ìš©ìê°€ inputì— "react" ì…ë ¥
<input value={keyword} onChange={(e) => setKeyword(e.target.value)} />
// â†’ setKeyword('react') í˜¸ì¶œ
// â†’ keyword: '' â†’ 'react'

// 2ë‹¨ê³„: ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§
function SearchPage() {
  // 3ë‹¨ê³„: useCallbackìœ¼ë¡œ í•¨ìˆ˜ ì°¸ì¡° ì•ˆì •í™”
  const saveDraft = useCallback(() => {
    console.log('ê²€ìƒ‰ ì‹¤í–‰:', keyword);
  }, [keyword]); // keywordê°€ '' â†’ 'react'ë¡œ ë³€ê²½ë˜ì—ˆìœ¼ë¯€ë¡œ ìƒˆ í•¨ìˆ˜ ìƒì„±
  // @100 ìƒì„± (keyword='react'ì— ì˜ì¡´)

  // 4ë‹¨ê³„: useEffect deps ë¹„êµ
  useEffect(() => {
    if (keyword) {
      saveDraft(); // ì‹¤í–‰
      setSearchCount((prev) => prev + 1); // searchCount: 0 â†’ 1
    }
  }, [saveDraft, keyword]);
  // ì´ì „ deps: [undefined, '']
  // í˜„ì¬ deps: [@100, 'react']
  // @100 !== undefined â†’ effect ì‹¤í–‰ âœ…
}

// 5ë‹¨ê³„: searchCount ë³€ê²½ìœ¼ë¡œ ë¦¬ë Œë”ë§ ë°œìƒ
// searchCount: 0 â†’ 1

// 6ë‹¨ê³„: ë¦¬ë Œë”ë§ì´ì§€ë§Œ keywordëŠ” ë™ì¼í•˜ë¯€ë¡œ saveDraft ì£¼ì†Œ ìœ ì§€
function SearchPage() {
  const saveDraft = useCallback(() => {
    console.log('ê²€ìƒ‰ ì‹¤í–‰:', keyword);
  }, [keyword]); // keyword='react' (ë³€ê²½ ì—†ìŒ)
  // @100 ìœ ì§€! (keywordê°€ ë™ì¼í•˜ë¯€ë¡œ useCallbackì´ ê°™ì€ ì°¸ì¡° ë°˜í™˜)

  // 7ë‹¨ê³„: useEffect deps ë¹„êµ
  useEffect(() => {
    if (keyword) {
      saveDraft();
      setSearchCount((prev) => prev + 1);
    }
  }, [saveDraft, keyword]);
  // ì´ì „ deps: [@100, 'react']
  // í˜„ì¬ deps: [@100, 'react']
  // @100 === @100 && 'react' === 'react' â†’ effect ê±´ë„ˆëœ€! âœ…
}

// 8ë‹¨ê³„: ì‚¬ìš©ìê°€ inputì— "vue" ì…ë ¥
// keyword: 'react' â†’ 'vue'

// 9ë‹¨ê³„: keyword ë³€ê²½ìœ¼ë¡œ ë¦¬ë Œë”ë§
function SearchPage() {
  const saveDraft = useCallback(() => {
    console.log('ê²€ìƒ‰ ì‹¤í–‰:', keyword);
  }, [keyword]); // keyword='vue'ë¡œ ë³€ê²½ë˜ì—ˆìœ¼ë¯€ë¡œ ìƒˆ í•¨ìˆ˜ ìƒì„±
  // @200 ìƒì„± (keyword='vue'ì— ì˜ì¡´)

  // 10ë‹¨ê³„: useEffect deps ë¹„êµ
  useEffect(() => {
    if (keyword) {
      saveDraft(); // ì‹¤í–‰
      setSearchCount((prev) => prev + 1);
    }
  }, [saveDraft, keyword]);
  // ì´ì „ deps: [@100, 'react']
  // í˜„ì¬ deps: [@200, 'vue']
  // @100 !== @200 â†’ effect ì‹¤í–‰ âœ… (ì˜ë„í•œ ëŒ€ë¡œ!)
}
```

**í•µì‹¬ í•´ê²°ì±…:**
- `useCallback`ì´ `keyword`ê°€ ë³€ê²½ë  ë•Œë§Œ í•¨ìˆ˜ë¥¼ ì¬ìƒì„±
- `searchCount`ê°€ ë³€ê²½ë˜ì–´ë„ `keyword`ëŠ” ë™ì¼í•˜ë¯€ë¡œ `saveDraft` ì£¼ì†Œ ìœ ì§€ (@100)
- ReactëŠ” deps ë¹„êµ ì‹œ `@100 === @100`ì´ë¯€ë¡œ "ë³€ê²½ ì—†ìŒ"ìœ¼ë¡œ íŒë‹¨
- effectëŠ” `keyword`ê°€ ì‹¤ì œë¡œ ë³€ê²½ë  ë•Œë§Œ ì‹¤í–‰ë¨
- ë¬´í•œ ë£¨í”„ í•´ê²°! âœ…

**ë¹„êµ ìš”ì•½:**

| ìƒí™© | inlineSaveDraft (ë©”ëª¨ì´ì œì´ì…˜ ì—†ìŒ) | saveDraft (useCallback) |
|------|-----------------------------------|------------------------|
| keyword ë³€ê²½ | @100 â†’ @200 (ìƒˆ í•¨ìˆ˜) | @100 â†’ @200 (ìƒˆ í•¨ìˆ˜) |
| searchCount ë³€ê²½ | @200 â†’ @300 (ìƒˆ í•¨ìˆ˜) âš ï¸ | @100 â†’ @100 (ë™ì¼ ì°¸ì¡°) âœ… |
| effect ì‹¤í–‰ | ë§¤ë²ˆ ì‹¤í–‰ (ë¬´í•œ ë£¨í”„) | keyword ë³€ê²½ ì‹œë§Œ ì‹¤í–‰ |

```mermaid
flowchart LR
    A2["ì‚¬ìš©ìê°€ inputì— ì…ë ¥"] --> B2["keyword ë³€ê²½"]
    B2 --> C2["ë¦¬ë Œë”ë§"]
    C2 --> D2["saveDraft @100 ìƒì„±<br/>(keyword ì˜ì¡´)"]
    D2 --> E2["effect ì‹¤í–‰ (ì£¼ì†Œ ë³€ê²½ ê°ì§€)"]
    E2 --> F2["setSearchCount â†’ searchCount=1"]
    F2 --> G2["ë¦¬ë Œë”ë§ (searchCount ë³€ê²½)"]
    G2 --> H2["saveDraft @100 ìœ ì§€<br/>(keyword ë™ì¼)"]
    H2 --> I2["effect ê±´ë„ˆëœ€ (ì£¼ì†Œ ë™ì¼)"]
    I2 --> J2["keyword ë³€ê²½ ì‹œì—ë§Œ"]
    J2 --> K2["saveDraft @200 ìƒì„±<br/>(ìƒˆ keyword ì˜ì¡´)"]
    K2 --> L2["effect ì‹¤í–‰"]
    
    style H2 fill:#d3f9d8,stroke:#51cf66,color:#000
    style I2 fill:#d3f9d8,stroke:#51cf66,color:#000
    style D2 fill:#e7f5ff,stroke:#339af0
    style K2 fill:#e7f5ff,stroke:#339af0
```

### React Queryê°€ ìˆìœ¼ë©´ ë” ë³µì¡í•´ì§‘ë‹ˆë‹¤

ì‹¤ì œ í”„ë¡œì íŠ¸ì—ì„œëŠ” React Query(TanStack Query)ì™€ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ì´ ê²½ìš° ë¬¸ì œ ì¶”ì ì´ í›¨ì”¬ ì–´ë ¤ì›Œì§‘ë‹ˆë‹¤.

```jsx
function SearchPage() {
  const [keyword, setKeyword] = useState('');

  // React Query ì‚¬ìš©
  const { data, refetch, isFetching } = useQuery({
    queryKey: ['search', keyword],
    queryFn: () => fetchSearchResults(keyword),
    enabled: !!keyword,
  });

  // ë§¤ ë Œë”ë§ë§ˆë‹¤ ìƒˆë¡œìš´ í•¨ìˆ˜ ìƒì„±
  const inlineSaveDraft = () => {
    console.log('ê²€ìƒ‰ ì‹¤í–‰:', keyword);
    refetch(); // ë°ì´í„° ë‹¤ì‹œ ê°€ì ¸ì˜¤ê¸°
  };

  useEffect(() => {
    if (keyword) {
      inlineSaveDraft();
    }
  }, [inlineSaveDraft, keyword]); // ë¬¸ì œ ë°œìƒ!

  return (
    <>
      <input value={keyword} onChange={(e) => setKeyword(e.target.value)} />
      {isFetching && <div>ë¡œë”© ì¤‘...</div>}
      <ul>{data?.map((r, i) => <li key={i}>{r}</li>)}</ul>
    </>
  );
}
```

**ë¬¸ì œì :**
- ì‚¬ìš©ìê°€ inputì— ê°’ì„ ì…ë ¥í•˜ë©´ `keyword` ìƒíƒœê°€ ë³€ê²½ë©ë‹ˆë‹¤
- `keyword` ë³€ê²½ìœ¼ë¡œ ë¦¬ë Œë”ë§ë˜ë©´ `inlineSaveDraft` í•¨ìˆ˜ê°€ ìƒˆë¡œ ìƒì„±ë©ë‹ˆë‹¤ (ìƒˆ ì£¼ì†Œ)
- useEffectì˜ depsì— `inlineSaveDraft`ê°€ ìˆìœ¼ë©´ ì£¼ì†Œ ë³€ê²½ì„ ê°ì§€í•´ effectê°€ ì‹¤í–‰ë©ë‹ˆë‹¤
- effect ë‚´ë¶€ì—ì„œ `refetch()`ë¥¼ í˜¸ì¶œí•˜ë©´ React Query ìƒíƒœê°€ ë³€ê²½ë˜ì–´ ë¦¬ë Œë”ë§ì´ ë°œìƒí•©ë‹ˆë‹¤
- ë¦¬ë Œë”ë§ìœ¼ë¡œ `inlineSaveDraft`ê°€ ë˜ ìƒˆë¡œ ìƒì„±ë˜ì–´ ë¬´í•œ ë£¨í”„ê°€ ë°œìƒí•©ë‹ˆë‹¤

#### 1ë‹¨ê³„: ì´ˆê¸° ì…ë ¥ìœ¼ë¡œ ì¸í•œ ë¦¬ë Œë”ë§

ì‚¬ìš©ìê°€ input í•„ë“œì— "react"ë¥¼ ì…ë ¥í•˜ëŠ” ìˆœê°„ë¶€í„° ì‹œì‘ë©ë‹ˆë‹¤.

```jsx
// ì‚¬ìš©ìê°€ inputì— "react" ì…ë ¥
<input value={keyword} onChange={(e) => setKeyword(e.target.value)} />
// â†’ setKeyword('react') í˜¸ì¶œ
```

**ì‹¤í–‰ íë¦„:**

```jsx
// 1. keyword ìƒíƒœ ë³€ê²½
const [keyword, setKeyword] = useState(''); // '' â†’ 'react'

// 2. ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§ ë°œìƒ
function SearchPage() {
  // 3. ë§¤ ë Œë”ë§ë§ˆë‹¤ ìƒˆë¡œìš´ í•¨ìˆ˜ ìƒì„± (ìƒˆ ë©”ëª¨ë¦¬ ì£¼ì†Œ)
  const inlineSaveDraft = () => {
    console.log('ê²€ìƒ‰ ì‹¤í–‰:', keyword); // @200 (ì´ì „ ë Œë”ë§ì—ì„œëŠ” @100)
    refetch();
  };

  // 4. useEffect deps ë¹„êµ
  useEffect(() => {
    if (keyword) {
      inlineSaveDraft();
    }
  }, [inlineSaveDraft, keyword]); 
  // ì´ì „ deps: [@100, ''] 
  // í˜„ì¬ deps: [@200, 'react']
  // @100 !== @200 â†’ effect ì‹¤í–‰!
}
```

```mermaid
flowchart LR
    A["ì‚¬ìš©ìê°€ inputì— ì…ë ¥"] --> B["keyword ìƒíƒœ ë³€ê²½"]
    B --> C["ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§"]
    C --> D["inlineSaveDraft ìƒˆë¡œ ìƒì„±<br/>(@100 â†’ @200)"]
    D --> E["useEffect deps ë¹„êµ<br/>(@100 !== @200)"]
    E --> F["effect ì‹¤í–‰"]
    
    style D fill:#ffe3e3,stroke:#ff6b6b
    style E fill:#fff3cd,stroke:#ffc107
    style F fill:#ffe3e3,stroke:#ff6b6b
```

**í•µì‹¬ ë¬¸ì œ:** `inlineSaveDraft` í•¨ìˆ˜ê°€ ë§¤ ë Œë”ë§ë§ˆë‹¤ ìƒˆë¡œìš´ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ë°›ê¸° ë•Œë¬¸ì—, ReactëŠ” ì´ë¥¼ "ë³€ê²½ëœ ê°’"ìœ¼ë¡œ ì¸ì‹í•©ë‹ˆë‹¤.

#### 2ë‹¨ê³„: React Query ìƒíƒœ ë³€ê²½ìœ¼ë¡œ ì¸í•œ ì—°ì‡„ ë°˜ì‘

1ë‹¨ê³„ì—ì„œ effectê°€ ì‹¤í–‰ë˜ë©´, ë‚´ë¶€ì—ì„œ `refetch()`ê°€ í˜¸ì¶œë©ë‹ˆë‹¤.

```jsx
useEffect(() => {
  if (keyword) {
    inlineSaveDraft(); // ì´ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ refetch() í˜¸ì¶œ
  }
}, [inlineSaveDraft, keyword]);

// inlineSaveDraft í•¨ìˆ˜ ë‚´ë¶€
const inlineSaveDraft = () => {
  console.log('ê²€ìƒ‰ ì‹¤í–‰:', keyword);
  refetch(); // âš ï¸ ì—¬ê¸°ì„œ ë¬¸ì œ ì‹œì‘!
};
```

**ì‹¤í–‰ íë¦„:**

```jsx
// 1. effect ì‹¤í–‰ â†’ inlineSaveDraft() í˜¸ì¶œ
useEffect(() => {
  inlineSaveDraft(); // refetch() í˜¸ì¶œ
}, [inlineSaveDraft, keyword]);

// 2. refetch() í˜¸ì¶œë¡œ React Query ìƒíƒœ ë³€ê²½
const { data, refetch, isFetching } = useQuery({
  queryKey: ['search', keyword],
  queryFn: () => fetchSearchResults(keyword),
  enabled: !!keyword,
});
// isFetching: false â†’ true â†’ false (ë¡œë”© ì™„ë£Œ)
// data: undefined â†’ [...results] (ë°ì´í„° ì—…ë°ì´íŠ¸)

// 3. React Query ìƒíƒœ ë³€ê²½ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§ ë°œìƒ
// â†’ SearchPage() í•¨ìˆ˜ ì „ì²´ê°€ ë‹¤ì‹œ ì‹¤í–‰ë¨

// 4. ë¦¬ë Œë”ë§ìœ¼ë¡œ inlineSaveDraft í•¨ìˆ˜ê°€ ë˜ ìƒˆë¡œ ìƒì„±
function SearchPage() {
  const inlineSaveDraft = () => { // @300 (ì´ì „ì—ëŠ” @200)
    console.log('ê²€ìƒ‰ ì‹¤í–‰:', keyword);
    refetch();
  };

  // 5. useEffect deps ë¹„êµ
  useEffect(() => {
    if (keyword) {
      inlineSaveDraft();
    }
  }, [inlineSaveDraft, keyword]);
  // ì´ì „ deps: [@200, 'react']
  // í˜„ì¬ deps: [@300, 'react']
  // @200 !== @300 â†’ effect ë˜ ì‹¤í–‰!
}
```

```mermaid
flowchart LR
    F["effect ì‹¤í–‰"] --> G["refetch() í˜¸ì¶œ"]
    G --> H["React Query ìƒíƒœ ë³€ê²½<br/>(isFetching: true â†’ false)"]
    H --> I["ë¦¬ë Œë”ë§ ë°œìƒ"]
    I --> J["inlineSaveDraft ë˜ ìƒˆë¡œ ìƒì„±<br/>(@200 â†’ @300)"]
    J --> K["useEffect deps ë¹„êµ<br/>(@200 !== @300)"]
    K --> F
    
    style H fill:#ffe3e3,stroke:#ff6b6b
    style J fill:#ffe3e3,stroke:#ff6b6b
    style K fill:#fff3cd,stroke:#ffc107
```

**í•µì‹¬ ë¬¸ì œ:** `refetch()`ê°€ React Query ìƒíƒœë¥¼ ë³€ê²½í•˜ê³ , ì´ë¡œ ì¸í•´ ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ë˜ë©´ì„œ `inlineSaveDraft` í•¨ìˆ˜ê°€ ë˜ ìƒˆë¡œ ìƒì„±ë©ë‹ˆë‹¤. ê°œë°œìëŠ” "keywordê°€ ë³€ê²½ë˜ì–´ì„œ effectê°€ ì‹¤í–‰ëê² ì§€"ë¼ê³  ìƒê°í•˜ì§€ë§Œ, ì‹¤ì œë¡œëŠ” React Query ìƒíƒœ ë³€ê²½ â†’ í•¨ìˆ˜ ì¬ìƒì„± â†’ effect ì¬ì‹¤í–‰ì˜ ì—°ì‡„ ë°˜ì‘ì…ë‹ˆë‹¤.

#### 3ë‹¨ê³„: ë¬´í•œ ë£¨í”„ ë°œìƒ

2ë‹¨ê³„ì—ì„œ effectê°€ ë‹¤ì‹œ ì‹¤í–‰ë˜ë©´, ê°™ì€ ê³¼ì •ì´ ë°˜ë³µë©ë‹ˆë‹¤.

```jsx
// 2ë‹¨ê³„ì—ì„œ effect ì¬ì‹¤í–‰
useEffect(() => {
  if (keyword) {
    inlineSaveDraft(); // @300 ì£¼ì†Œì˜ í•¨ìˆ˜ í˜¸ì¶œ
  }
}, [inlineSaveDraft, keyword]); // [@300, 'react']

// inlineSaveDraft ì‹¤í–‰ â†’ refetch() í˜¸ì¶œ
const inlineSaveDraft = () => {
  console.log('ê²€ìƒ‰ ì‹¤í–‰:', keyword);
  refetch(); // React Query ìƒíƒœ ë³€ê²½
};

// React Query ìƒíƒœ ë³€ê²½ â†’ ë¦¬ë Œë”ë§
// â†’ inlineSaveDraft @400 ìƒì„±
// â†’ useEffect deps ë¹„êµ: @300 !== @400
// â†’ effect ë˜ ì‹¤í–‰
// â†’ refetch() ë˜ í˜¸ì¶œ
// â†’ ë¦¬ë Œë”ë§
// â†’ inlineSaveDraft @500 ìƒì„±
// â†’ ... ë¬´í•œ ë°˜ë³µ ğŸ”„
```

**ì‹¤í–‰ íë¦„ (ë¬´í•œ ë°˜ë³µ):**

```jsx
// ë Œë”ë§ 1
const inlineSaveDraft = () => { ... }; // @200
useEffect(..., [@200, 'react']); // effect ì‹¤í–‰

// ë Œë”ë§ 2 (refetchë¡œ ì¸í•œ ë¦¬ë Œë”ë§)
const inlineSaveDraft = () => { ... }; // @300
useEffect(..., [@300, 'react']); // @200 !== @300 â†’ effect ì‹¤í–‰

// ë Œë”ë§ 3 (refetchë¡œ ì¸í•œ ë¦¬ë Œë”ë§)
const inlineSaveDraft = () => { ... }; // @400
useEffect(..., [@400, 'react']); // @300 !== @400 â†’ effect ì‹¤í–‰

// ë Œë”ë§ 4 (refetchë¡œ ì¸í•œ ë¦¬ë Œë”ë§)
const inlineSaveDraft = () => { ... }; // @500
useEffect(..., [@500, 'react']); // @400 !== @500 â†’ effect ì‹¤í–‰

// ... ë¬´í•œ ë°˜ë³µ
```

**ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì¦ìƒ:**

```jsx
// ì½˜ì†” ì¶œë ¥ (ë¬´í•œ ë°˜ë³µ)
ê²€ìƒ‰ ì‹¤í–‰: react
ê²€ìƒ‰ ì‹¤í–‰: react
ê²€ìƒ‰ ì‹¤í–‰: react
ê²€ìƒ‰ ì‹¤í–‰: react
// ... ê³„ì† ë°˜ë³µ
```

**React DevToolsì—ì„œ í™•ì¸:**

- Components íƒ­ì—ì„œ ì»´í¬ë„ŒíŠ¸ê°€ ê³„ì† ê¹œë¹¡ì„ (ë¦¬ë Œë”ë§)
- Profilerì—ì„œ ë Œë”ë§ì´ ë¬´í•œ ë°˜ë³µë˜ëŠ” ê²ƒì„ í™•ì¸ ê°€ëŠ¥

```mermaid
flowchart LR
    K["useEffect deps ë¹„êµ<br/>(@200 !== @300)"] --> F["effect ì‹¤í–‰"]
    F --> G["refetch() í˜¸ì¶œ"]
    G --> H["React Query ìƒíƒœ ë³€ê²½"]
    H --> I["ë¦¬ë Œë”ë§ ë°œìƒ"]
    I --> J["inlineSaveDraft ë˜ ìƒˆë¡œ ìƒì„±<br/>(@300 â†’ @400)"]
    J --> K2["useEffect deps ë¹„êµ<br/>(@300 !== @400)"]
    K2 --> F
    F --> L["ë¬´í•œ ë£¨í”„! ğŸ”„"]
    
    style L fill:#ff6b6b,stroke:#c92a2a,color:#fff,stroke-width:3px
    style F fill:#ffe3e3,stroke:#ff6b6b
    style J fill:#ffe3e3,stroke:#ff6b6b
```

**ì™œ ì´ë ‡ê²Œ ë˜ëŠ”ê°€?**

1. `keyword`ëŠ” ë³€ê²½ë˜ì§€ ì•Šì•˜ì§€ë§Œ (`'react'`ë¡œ ë™ì¼)
2. `inlineSaveDraft` í•¨ìˆ˜ë§Œ ê³„ì† ìƒˆë¡œ ìƒì„±ë¨ (ë©”ëª¨ë¦¬ ì£¼ì†Œë§Œ ë³€ê²½)
3. ReactëŠ” deps ë¹„êµ ì‹œ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ë¹„êµí•˜ë¯€ë¡œ (`@200 !== @300 !== @400`)
4. ë§¤ë²ˆ "ë³€ê²½ë¨"ìœ¼ë¡œ íŒë‹¨í•˜ì—¬ effectë¥¼ ì‹¤í–‰
5. effect ì‹¤í–‰ â†’ refetch â†’ ë¦¬ë Œë”ë§ â†’ í•¨ìˆ˜ ì¬ìƒì„± â†’ effect ì‹¤í–‰ (ë¬´í•œ ë°˜ë³µ)

**ì™œ ì¶”ì ì´ ì–´ë ¤ìš´ê°€?**

1. ì‚¬ìš©ìê°€ inputì— ê°’ì„ ì…ë ¥í•˜ë©´ `keyword` ìƒíƒœê°€ ë³€ê²½ë©ë‹ˆë‹¤
2. `keyword` ë³€ê²½ìœ¼ë¡œ ë¦¬ë Œë”ë§ë˜ë©´ `inlineSaveDraft` í•¨ìˆ˜ê°€ ìƒˆë¡œ ìƒì„±ë©ë‹ˆë‹¤ (ìƒˆ ë©”ëª¨ë¦¬ ì£¼ì†Œ)
3. useEffectì˜ depsì— `inlineSaveDraft`ê°€ ìˆìœ¼ë©´ ì£¼ì†Œ ë³€ê²½ì„ ê°ì§€í•´ effectê°€ ì‹¤í–‰ë©ë‹ˆë‹¤
4. effect ë‚´ë¶€ì—ì„œ `refetch()`ë¥¼ í˜¸ì¶œí•˜ë©´ React Queryì˜ ì¿¼ë¦¬ ìƒíƒœ(`isFetching`, `data` ë“±)ê°€ ë³€ê²½ë©ë‹ˆë‹¤
5. ì¿¼ë¦¬ ìƒíƒœ ë³€ê²½ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ê°€ ë˜ ë¦¬ë Œë”ë§ë˜ê³ , `inlineSaveDraft`ê°€ ë˜ ìƒˆë¡œ ìƒì„±ë©ë‹ˆë‹¤
6. ê°œë°œìëŠ” "keywordê°€ ë³€ê²½ë˜ì–´ì„œ effectê°€ ì‹¤í–‰ëê² ì§€"ë¼ê³  ìƒê°í•˜ì§€ë§Œ, ì‹¤ì œë¡œëŠ” React Queryì˜ ìƒíƒœ ë³€ê²½ â†’ í•¨ìˆ˜ ì¬ìƒì„± â†’ effect ì¬ì‹¤í–‰ì˜ ì—°ì‡„ ë°˜ì‘ì´ ë°œìƒí•©ë‹ˆë‹¤

ESLintëŠ” ì´ ìƒí™©ì—ì„œ ê²½ê³ í•˜ì§€ë§Œ, React Queryê°€ ê°œì…ë˜ë©´ ì–´ë–¤ ì˜ì¡´ì„±ì´ ë¬¸ì œì¸ì§€ íŒŒì•…í•˜ê¸° ë§¤ìš° ì–´ë µìŠµë‹ˆë‹¤. íŠ¹íˆ `refetch`ê°€ ìƒíƒœë¥¼ ë³€ê²½í•˜ê³ , ê·¸ ìƒíƒœ ë³€ê²½ì´ ë‹¤ì‹œ ë Œë”ë§ì„ ìœ ë°œí•˜ëŠ” ìˆœí™˜ êµ¬ì¡°ë¥¼ ì´í•´í•´ì•¼ í•©ë‹ˆë‹¤.

## useMemoë¡œ ê°ì²´ ì•ˆì •í™”í•˜ê¸°

ê°ì²´ë‚˜ ë°°ì—´ì´ depsì— ë“¤ì–´ê°€ì•¼ í•  ë•ŒëŠ” useMemoë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

```jsx
function UserDashboard() {
  const [user, setUser] = useState({ name: 'Kim' });

  // useMemoë¡œ ê°ì²´ ì°¸ì¡° ì•ˆì •í™”
  const config = useMemo(() => ({ theme: 'dark', locale: 'ko' }), []);

  useEffect(() => {
    applyConfig(config);
  }, [config]); // ìµœì´ˆ 1íšŒë§Œ ì‹¤í–‰

  return <div>{user.name}</div>;
}
```

---

# React.memoì™€ ë©”ëª¨ì´ì œì´ì…˜

useCallbackê³¼ useMemoê°€ í•„ìš”í•œ ë˜ ë‹¤ë¥¸ ì¤‘ìš”í•œ ì¼€ì´ìŠ¤ëŠ” `React.memo`ë¡œ ê°ì‹¼ ìì‹ ì»´í¬ë„ŒíŠ¸ì— propsë¥¼ ì „ë‹¬í•  ë•Œì…ë‹ˆë‹¤.

## React.memoì˜ ë™ì‘ ì›ë¦¬

`React.memo`ëŠ” propsê°€ ë³€ê²½ë˜ì§€ ì•Šìœ¼ë©´ ë¦¬ë Œë”ë§ì„ ê±´ë„ˆëœë‹ˆë‹¤. í•˜ì§€ë§Œ props ë¹„êµë„ `Object.is`ë¡œ ìˆ˜í–‰ë©ë‹ˆë‹¤.

```jsx
const ExpensiveChild = React.memo(({ onClick, data }) => {
  console.log('ExpensiveChild ë Œë”ë§');
  return <button onClick={onClick}>{data.label}</button>;
});

function Parent() {
  const [count, setCount] = useState(0);

  // ë§¤ ë Œë”ë§ë§ˆë‹¤ ìƒˆ í•¨ìˆ˜/ê°ì²´ ìƒì„±
  const handleClick = () => console.log('clicked');
  const data = { label: 'Click me' };

  return (
    <>
      <button onClick={() => setCount(count + 1)}>Count: {count}</button>
      {/* countê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ExpensiveChildë„ ë¦¬ë Œë”ë§ë¨ */}
      <ExpensiveChild onClick={handleClick} data={data} />
    </>
  );
}
```

```mermaid
sequenceDiagram
    participant P as Parent
    participant M as React.memo
    participant C as ExpensiveChild

    P->>P: count ë³€ê²½ â†’ ë¦¬ë Œë”ë§
    P->>P: handleClick = () => {} (ìƒˆ ì£¼ì†Œ)
    P->>P: data = { label } (ìƒˆ ì£¼ì†Œ)
    P->>M: props ì „ë‹¬
    M->>M: Object.is(oldProps.onClick, newProps.onClick)
    M->>M: false (ì£¼ì†Œê°€ ë‹¤ë¦„)
    M->>C: ë¦¬ë Œë”ë§ ì‹¤í–‰
    Note over C: memo íš¨ê³¼ ì—†ìŒ!
```

## ë©”ëª¨ì´ì œì´ì…˜ìœ¼ë¡œ í•´ê²°

```jsx
function Parent() {
  const [count, setCount] = useState(0);

  // ì°¸ì¡° ì•ˆì •í™”
  const handleClick = useCallback(() => console.log('clicked'), []);
  const data = useMemo(() => ({ label: 'Click me' }), []);

  return (
    <>
      <button onClick={() => setCount(count + 1)}>Count: {count}</button>
      {/* countê°€ ë³€ê²½ë˜ì–´ë„ ExpensiveChildëŠ” ë¦¬ë Œë”ë§ë˜ì§€ ì•ŠìŒ */}
      <ExpensiveChild onClick={handleClick} data={data} />
    </>
  );
}
```

```mermaid
sequenceDiagram
    participant P as Parent
    participant M as React.memo
    participant C as ExpensiveChild

    P->>P: count ë³€ê²½ â†’ ë¦¬ë Œë”ë§
    P->>P: handleClick (ë™ì¼ ì£¼ì†Œ ìœ ì§€)
    P->>P: data (ë™ì¼ ì£¼ì†Œ ìœ ì§€)
    P->>M: props ì „ë‹¬
    M->>M: Object.is(oldProps.onClick, newProps.onClick)
    M->>M: true (ì£¼ì†Œê°€ ê°™ìŒ)
    Note over M: ë¦¬ë Œë”ë§ ê±´ë„ˆëœ€
    Note over C: ë Œë”ë§ ì•ˆí•¨!
```

---

# ESLint ê²½ê³ ì˜ í•œê³„ì™€ ì»¤ìŠ¤í…€ í›…ì˜ í•¨ì •

## eslint-plugin-react-hooksì˜ ì—­í• 

`eslint-plugin-react-hooks`ëŠ” ë©”ëª¨ì´ì œì´ì…˜ë˜ì§€ ì•Šì€ í•¨ìˆ˜ë¥¼ ì˜ì¡´ì„± ë°°ì—´ì— ë„£ìœ¼ë©´ ê²½ê³ í•©ë‹ˆë‹¤.

```jsx
function Example() {
  const [count, setCount] = useState(0);

  // ë©”ëª¨ì´ì œì´ì…˜ë˜ì§€ ì•Šì€ í•¨ìˆ˜
  const handleClick = () => {
    console.log(count);
  };

  useEffect(() => {
    handleClick();
  }, [handleClick]); // ESLint ê²½ê³ : The 'handleClick' function makes the dependencies of useEffect Hook change on every render

  return <button onClick={handleClick}>{count}</button>;
}
```

ì´ ê²½ê³ ëŠ” "ë§¤ ë Œë”ë§ë§ˆë‹¤ í•¨ìˆ˜ê°€ ì¬ìƒì„±ë˜ì–´ effectê°€ ë¶ˆí•„ìš”í•˜ê²Œ ì‹¤í–‰ë  ìˆ˜ ìˆë‹¤"ëŠ” ê²ƒì„ ì•Œë ¤ì¤ë‹ˆë‹¤. ESLintëŠ” `useCallback`ìœ¼ë¡œ ê°ì‹¸ê±°ë‚˜ effect ë‚´ë¶€ë¡œ í•¨ìˆ˜ë¥¼ ì´ë™í•˜ë¼ê³  ì œì•ˆí•©ë‹ˆë‹¤.

## ì»¤ìŠ¤í…€ í›…ì—ì„œ ë°˜í™˜ëœ í•¨ìˆ˜ëŠ” ê²½ê³ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤

ë¬¸ì œëŠ” ì»¤ìŠ¤í…€ í›…ì—ì„œ ë°˜í™˜ëœ ë©”ëª¨ì´ì œì´ì…˜ë˜ì§€ ì•Šì€ í•¨ìˆ˜ë¥¼ depsì— ë„£ìœ¼ë©´ ESLintê°€ ê²½ê³ í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì ì…ë‹ˆë‹¤.

```jsx
// useAutoSave.ts - ë©”ëª¨ì´ì œì´ì…˜ ì—†ì´ í•¨ìˆ˜ ë°˜í™˜
function useAutoSave() {
  const [lastSaved, setLastSaved] = useState<Date | null>(null);

  // ë©”ëª¨ì´ì œì´ì…˜ë˜ì§€ ì•Šì€ í•¨ìˆ˜ ë°˜í™˜
  const save = (content: string) => {
    api.save(content);
    setLastSaved(new Date());
  };

  return { save, lastSaved };
}

// Component.tsx
function Editor() {
  const [content, setContent] = useState('');
  const { save } = useAutoSave(); // ë§¤ ë Œë”ë§ë§ˆë‹¤ ìƒˆë¡œìš´ save í•¨ìˆ˜

  useEffect(() => {
    const timer = setInterval(() => save(content), 5000);
    return () => clearInterval(timer);
  }, [save, content]); // ESLint ê²½ê³  ì—†ìŒ!

  return <textarea value={content} onChange={(e) => setContent(e.target.value)} />;
}
```

```mermaid
flowchart LR
    subgraph "useAutoSave Hook"
        A["save í•¨ìˆ˜ ìƒì„± (ë©”ëª¨ì´ì œì´ì…˜ ì—†ìŒ)"]
        B["return { save }"]
    end

    subgraph Component
        C["const { save } = useAutoSave()"]
        D["useEffect deps: [save]"]
    end

    subgraph ESLint
        E["ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ í•¨ìˆ˜"]
        F["í›…ì—ì„œ ë°˜í™˜ëœ í•¨ìˆ˜"]
    end

    A --> B
    B --> C
    C --> D
    E -->|"ê²½ê³ í•¨"| D
    F -->|"ê²½ê³  ì•ˆí•¨"| D
```

ESLintëŠ” ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ì„ ì–¸í•œ í•¨ìˆ˜ê°€ depsì— ë“¤ì–´ê°€ë©´ ê²½ê³ í•˜ì§€ë§Œ, í›…ì—ì„œ ë°˜í™˜ëœ í•¨ìˆ˜ëŠ” "ì´ë¯¸ ì•ˆì •ì ì¸ ì°¸ì¡°ì¼ ê²ƒ"ì´ë¼ê³  ê°€ì •í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì‹¤ì œë¡œëŠ” í›… ë‚´ë¶€ì—ì„œ ë©”ëª¨ì´ì œì´ì…˜í•˜ì§€ ì•Šìœ¼ë©´ ë§¤ ë Œë”ë§ë§ˆë‹¤ ìƒˆ í•¨ìˆ˜ê°€ ìƒì„±ë©ë‹ˆë‹¤.

## ê²°ê³¼: ìˆ¨ê²¨ì§„ ì„±ëŠ¥ ë¬¸ì œ

```jsx
function Editor() {
  const [content, setContent] = useState('');
  const [cursor, setCursor] = useState(0);
  const { save } = useAutoSave(); // ë©”ëª¨ì´ì œì´ì…˜ ì•ˆëœ í•¨ìˆ˜

  useEffect(() => {
    const timer = setInterval(() => save(content), 5000);
    return () => clearInterval(timer);
  }, [save, content]); // ESLint ê²½ê³  ì—†ìŒ, í•˜ì§€ë§Œ ë¬¸ì œ ë°œìƒ

  // cursorê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ useAutoSaveê°€ ìƒˆ save í•¨ìˆ˜ë¥¼ ë°˜í™˜
  return (
    <textarea
      value={content}
      onChange={(e) => setContent(e.target.value)}
      onSelect={(e) => setCursor(e.target.selectionStart)}
    />
  );
}
```

ì»¤ì„œ ìœ„ì¹˜ê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤:
1. ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§
2. `useAutoSave`ê°€ ìƒˆ `save` í•¨ìˆ˜ ë°˜í™˜ (ìƒˆ ë©”ëª¨ë¦¬ ì£¼ì†Œ)
3. useEffectê°€ `save` ë³€ê²½ ê°ì§€ â†’ effect ì¬ì‹¤í–‰
4. ê¸°ì¡´ íƒ€ì´ë¨¸ ì •ë¦¬ í›„ ìƒˆ íƒ€ì´ë¨¸ ìƒì„±

ESLintëŠ” ì´ ë¬¸ì œë¥¼ ê²½ê³ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. í›…ì—ì„œ ë°˜í™˜ëœ í•¨ìˆ˜ëŠ” ì•ˆì •ì ì¸ ì°¸ì¡°ë¼ê³  ê°€ì •í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì´ê²ƒì´ ì»¤ìŠ¤í…€ í›… ì„¤ê³„ ì‹œ ë°˜í™˜ê°’ì˜ ë©”ëª¨ì´ì œì´ì…˜ì´ ì¤‘ìš”í•œ ì´ìœ ì…ë‹ˆë‹¤.

---

# ë©”ëª¨ì´ì œì´ì…˜ ì„¤ê³„ ì›ì¹™

ì»¤ìŠ¤í…€ í›…ì„ ì„¤ê³„í•  ë•ŒëŠ” ë°˜í™˜ê°’ì˜ ì°¸ì¡° ì•ˆì •ì„±ì„ ë³´ì¥í•´ì•¼ í•©ë‹ˆë‹¤.

## ì›ì¹™ 1: ì°¸ì¡°í˜• ë°˜í™˜ê°’ì€ ë¬´ì¡°ê±´ ë©”ëª¨ì´ì œì´ì…˜

í›…ì—ì„œ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë‚˜ ê°ì²´ëŠ” ì˜ì¡´ì„± ë°°ì—´ì— ë“¤ì–´ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì°¸ì¡°ë¥¼ ì•ˆì •ì ìœ¼ë¡œ ìœ ì§€í•´ì•¼ í•©ë‹ˆë‹¤.

```jsx
// Bad: ë§¤ ë Œë”ë§ë§ˆë‹¤ ìƒˆ í•¨ìˆ˜ ìƒì„±
function useCounter() {
  const [count, setCount] = useState(0);

  const increment = () => setCount((c) => c + 1);
  const decrement = () => setCount((c) => c - 1);

  return { count, increment, decrement };
}

// Good: useCallbackìœ¼ë¡œ í•¨ìˆ˜ ì°¸ì¡° ì•ˆì •í™”
function useCounter() {
  const [count, setCount] = useState(0);

  const increment = useCallback(() => setCount((c) => c + 1), []);
  const decrement = useCallback(() => setCount((c) => c - 1), []);

  return { count, increment, decrement };
}
```

```mermaid
flowchart TB
    subgraph "ë©”ëª¨ì´ì œì´ì…˜ ì—†ìŒ"
        A1[ë Œë”ë§ 1] --> B1["increment @100"]
        A2[ë Œë”ë§ 2] --> B2["increment @200"]
        A3[ë Œë”ë§ 3] --> B3["increment @300"]
    end

    subgraph "useCallback ì ìš©"
        C1[ë Œë”ë§ 1] --> D1["increment @100"]
        C2[ë Œë”ë§ 2] --> D1
        C3[ë Œë”ë§ 3] --> D1
    end
```

## ì›ì¹™ 2: ì›ì‹œí˜• ë°˜í™˜ê°’ì€ ê³„ì‚° ë¹„ìš©ì„ ê³ ë ¤

ì›ì‹œí˜•ì€ ê°’ ë¹„êµê°€ ë˜ë¯€ë¡œ ë©”ëª¨ì´ì œì´ì…˜ì´ í•„ìˆ˜ëŠ” ì•„ë‹™ë‹ˆë‹¤. ê³„ì‚° ë¹„ìš©ì´ í´ ë•Œë§Œ useMemoë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

```jsx
// ë©”ëª¨ì´ì œì´ì…˜ ë¶ˆí•„ìš”: ë‹¨ìˆœ ê³„ì‚°
function useItemCount(items) {
  const count = items.length; // O(1)
  return count;
}

// ë©”ëª¨ì´ì œì´ì…˜ í•„ìš”: ë³µì¡í•œ ê³„ì‚°
function useFilteredItems(items, filter) {
  const filtered = useMemo(
    () => items.filter((item) => item.category === filter), // O(n)
    [items, filter]
  );
  return filtered;
}
```

## ì›ì¹™ 3: ê°ì²´ ë°˜í™˜ ì‹œ useMemoë¡œ ê°ì‹¸ê¸°

ì—¬ëŸ¬ ê°’ì„ ê°ì²´ë¡œ ë°˜í™˜í•  ë•ŒëŠ” useMemoë¡œ ê°ì²´ ì°¸ì¡°ë¥¼ ì•ˆì •í™”í•©ë‹ˆë‹¤.

```jsx
// Bad: ë§¤ ë Œë”ë§ë§ˆë‹¤ ìƒˆ ê°ì²´ ìƒì„±
function useWindowSize() {
  const [size, setSize] = useState({ width: 0, height: 0 });

  useEffect(() => {
    const handler = () => setSize({ width: window.innerWidth, height: window.innerHeight });
    window.addEventListener('resize', handler);
    return () => window.removeEventListener('resize', handler);
  }, []);

  // ìƒˆ ê°ì²´ë¥¼ ë§¤ë²ˆ ìƒì„±
  return { width: size.width, height: size.height, isLarge: size.width > 1024 };
}

// Good: useMemoë¡œ ê°ì²´ ì•ˆì •í™”
function useWindowSize() {
  const [size, setSize] = useState({ width: 0, height: 0 });

  useEffect(() => {
    const handler = () => setSize({ width: window.innerWidth, height: window.innerHeight });
    window.addEventListener('resize', handler);
    return () => window.removeEventListener('resize', handler);
  }, []);

  return useMemo(
    () => ({ width: size.width, height: size.height, isLarge: size.width > 1024 }),
    [size.width, size.height]
  );
}
```

## ì •ë¦¬: íƒ€ì…ë³„ ë©”ëª¨ì´ì œì´ì…˜ ê°€ì´ë“œ

| ë°˜í™˜ê°’ íƒ€ì…        | ë©”ëª¨ì´ì œì´ì…˜     | ì´ìœ                                      |
| ------------------ | ---------------- | ---------------------------------------- |
| í•¨ìˆ˜               | useCallback í•„ìˆ˜ | ì°¸ì¡°í˜•, ì˜ì¡´ì„± ë°°ì—´ì—ì„œ ì‚¬ìš©ë  ìˆ˜ ìˆìŒ   |
| ê°ì²´/ë°°ì—´          | useMemo í•„ìˆ˜     | ì°¸ì¡°í˜•, ì˜ì¡´ì„± ë°°ì—´ì—ì„œ ì‚¬ìš©ë  ìˆ˜ ìˆìŒ   |
| ìˆ«ì/ë¬¸ìì—´/ë¶ˆë¦¬ì–¸ | ê³„ì‚° ë¹„ìš© ê³ ë ¤   | ì›ì‹œí˜•ì€ ê°’ ë¹„êµ, ë¹„ìš©ì´ í´ ë•Œë§Œ useMemo |

```mermaid
flowchart LR
    A["í›…ì—ì„œ ê°’ ë°˜í™˜"] --> B{"ë°˜í™˜ê°’ íƒ€ì…?"}
    B -->|"í•¨ìˆ˜"| C["useCallback í•„ìˆ˜"]
    B -->|"ê°ì²´/ë°°ì—´"| D["useMemo í•„ìˆ˜"]
    B -->|"ì›ì‹œí˜•"| E{"ê³„ì‚° ë¹„ìš©ì´ í°ê°€?"}
    E -->|"Yes"| F["useMemo ê¶Œì¥"]
    E -->|"No"| G["ë©”ëª¨ì´ì œì´ì…˜ ë¶ˆí•„ìš”"]
```

---

# í”í•œ ì‹¤ìˆ˜ íŒ¨í„´

## ì‹¤ìˆ˜ 1: deps ë°°ì—´ ì•ˆì—ì„œ ê°ì²´/ë°°ì—´ ë¦¬í„°ëŸ´ ì‚¬ìš©

```jsx
// Bad: ë§¤ ë Œë”ë§ë§ˆë‹¤ ìƒˆ ë°°ì—´ ìƒì„±
useEffect(() => {
  fetchUsers(userIds);
}, [[1, 2, 3]]); // í•­ìƒ ìƒˆ ë°°ì—´!

// Good: useMemo ì‚¬ìš© ë˜ëŠ” ì™¸ë¶€ì—ì„œ ìƒìˆ˜ë¡œ ì •ì˜
const userIds = useMemo(() => [1, 2, 3], []);
useEffect(() => {
  fetchUsers(userIds);
}, [userIds]);
```

## ì‹¤ìˆ˜ 2: useCallback ë‚´ë¶€ì—ì„œ ìµœì‹  state ì°¸ì¡°

```jsx
// Bad: countê°€ ë³€ê²½ë˜ì–´ë„ ì˜¤ë˜ëœ ê°’ ì°¸ì¡°
const handleClick = useCallback(() => {
  setCount(count + 1); // í´ë¡œì €ì— countê°€ ê³ ì •ë¨
}, []); // depsê°€ ë¹„ì–´ìˆìŒ

// Good: í•¨ìˆ˜í˜• ì—…ë°ì´íŠ¸ ì‚¬ìš©
const handleClick = useCallback(() => {
  setCount((prev) => prev + 1); // í•­ìƒ ìµœì‹  ê°’ ì‚¬ìš©
}, []);
```

## ì‹¤ìˆ˜ 3: ë¶ˆí•„ìš”í•œ ë©”ëª¨ì´ì œì´ì…˜

```jsx
// Bad: ì›ì‹œí˜•ì€ ë©”ëª¨ì´ì œì´ì…˜ ë¶ˆí•„ìš”
const doubled = useMemo(() => count * 2, [count]);

// Good: ê·¸ëƒ¥ ê³„ì‚°
const doubled = count * 2;

// Good: ë³µì¡í•œ ê³„ì‚°ë§Œ ë©”ëª¨ì´ì œì´ì…˜
const sortedItems = useMemo(
  () => items.sort((a, b) => a.price - b.price),
  [items]
);
```

```mermaid
flowchart LR
    A["ë©”ëª¨ì´ì œì´ì…˜ì´ í•„ìš”í•œê°€?"] --> B{"ì°¸ì¡°í˜•ì¸ê°€?"}
    B -->|"Yes"| C{"depsì— ë“¤ì–´ê°€ê±°ë‚˜<br/>memoëœ ì»´í¬ë„ŒíŠ¸ì— ì „ë‹¬?"}
    C -->|"Yes"| D["ë©”ëª¨ì´ì œì´ì…˜ í•„ìš”"]
    C -->|"No"| E["ë¶ˆí•„ìš”í•  ìˆ˜ ìˆìŒ"]
    B -->|"No (ì›ì‹œí˜•)"| F{"ê³„ì‚° ë¹„ìš©ì´ í°ê°€?"}
    F -->|"Yes"| G["useMemo ê³ ë ¤"]
    F -->|"No"| H["ë©”ëª¨ì´ì œì´ì…˜ ë¶ˆí•„ìš”"]
```

---

# ê²°ë¡ 

useCallbackê³¼ useMemoëŠ” ë‹¨ìˆœí•œ ì„±ëŠ¥ ìµœì í™” ë„êµ¬ê°€ ì•„ë‹™ë‹ˆë‹¤.

1. **ì°¸ì¡°í˜• ë°ì´í„°ì˜ íŠ¹ì„±** ë•Œë¬¸ì— í•„ìš”í•©ë‹ˆë‹¤. ë‚´ìš©ì´ ê°™ì•„ë„ ë§¤ ë Œë”ë§ë§ˆë‹¤ ìƒˆë¡œìš´ ë©”ëª¨ë¦¬ ì£¼ì†Œê°€ í• ë‹¹ë©ë‹ˆë‹¤.
2. **useEffect ì˜ì¡´ì„± ë°°ì—´**ì—ì„œ ì°¸ì¡°í˜•ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ë©´ ì˜ë„ì¹˜ ì•Šì€ effect ì¬ì‹¤í–‰ì´ë‚˜ ë¬´í•œ ë£¨í”„ê°€ ë°œìƒí•©ë‹ˆë‹¤.
3. **React.memoë¡œ ê°ì‹¼ ì»´í¬ë„ŒíŠ¸**ì— ì°¸ì¡°í˜• propsë¥¼ ì „ë‹¬í•˜ë©´ ë©”ëª¨ì´ì œì´ì…˜ íš¨ê³¼ê°€ ì‚¬ë¼ì§‘ë‹ˆë‹¤.
4. **ESLintëŠ” ì»¤ìŠ¤í…€ í›… ê²½ê³„ë¥¼ ë„˜ì–´ê°€ë©´ ê²½ê³ í•˜ì§€ ëª»í•©ë‹ˆë‹¤.** í›… ì„¤ê³„ ì‹œ ë°˜í™˜ê°’ì˜ ì°¸ì¡° ì•ˆì •ì„±ì„ ì§ì ‘ ë³´ì¥í•´ì•¼ í•©ë‹ˆë‹¤.
5. **ì»¤ìŠ¤í…€ í›…ì—ì„œëŠ” ì°¸ì¡°í˜• ë°˜í™˜ê°’ì„ í•­ìƒ ë©”ëª¨ì´ì œì´ì…˜**í•©ë‹ˆë‹¤. ì›ì‹œí˜•ì€ ê³„ì‚° ë¹„ìš©ì„ ê³ ë ¤í•´ ê²°ì •í•©ë‹ˆë‹¤.
