## <mark style={{background: "#FF5582A6"}}>íŒ€ í”„ë¡œì íŠ¸ ì„¸íŒ…</mark>

### <mark style={{background: "#FFB86CA6"}}>ì—­í• </mark>

ê³µí†µ ì»´í¬ë„ŒíŠ¸ ì œì‘: infinite scroll, Button ê°™ì€ ê°„ë‹¨í•œ UI

ëª©ë¡ í˜ì´ì§€ widget ì œì‘: íˆ¬í‘œ ë¦¬ìŠ¤íŠ¸ ê´€ë ¨ Skeleton,

CICD : Netlifyì™€ GithubActionì„ í†µí•´ì„œ PR eventì— ë°˜ì‘í•˜ì—¬ ìë™ ë°°í¬í•˜ëŠ” ë¡œì§ êµ¬í˜„

### <mark style={{background: "#FFB86CA6"}}>ê¸°ê°„ë³„ ì—…ë¬´</mark>

<img src="/images/2024-05-18/plan.png" alt="plan" />

### <mark style={{background: "#FFB86CA6"}}>í´ë” êµ¬ì¡°</mark>

ê¸°ì¡´ì— ì‚¬ìš©í•˜ë˜ FSD êµ¬ì¡°ëŠ” ë‹¤ë¥¸ íŒ€ì›ë“¤ë„ ì™„ë²½í•˜ê²Œ ì•Œì•„ì•¼ë§Œ íš¨ê³¼ì ì¸ êµ¬ì¡°ì´ê¸° ë•Œë¬¸ì— íŒ€ì›ë“¤ê³¼ì˜ íšŒì˜ ëì— ì¡°ê¸ˆ ë³€í˜•ë˜ì–´ ì‚¬ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.

```terminal
ğŸ“¦src
    â”œâ”€â”€ ğŸ“‚main.jsx
    â”œâ”€â”€ ğŸ“‚main.scss
    â”œâ”€â”€ ğŸ“‚app/
    â”‚   â”œâ”€â”€ ğŸ“œindex.js
    â”‚   â”œâ”€â”€ ğŸ“œindex.scss
    â”‚   â””â”€â”€ ğŸ“‚pages/
    â”‚       â”œâ”€â”€ ğŸ“‚MyPage/
    â”‚       â”‚   â”œâ”€â”€ ğŸ“œindex.jsx
    â”‚       â”‚   â””â”€â”€ ğŸ“‚widgets/
    â”‚       â”‚       â”œâ”€â”€ ğŸ“‚<ì´ë¦„>/
    â”‚       â”‚       â”‚   â”œâ”€â”€ ğŸ“œindex.jsx
    â”‚       â”‚       â”‚   â””â”€â”€ ğŸ“œindex.scss
    â”‚       â”‚       â””â”€â”€ ...
    â”‚       â”œâ”€â”€ ğŸ“‚ListPage/
    â”‚       â”‚   â”œâ”€â”€ ğŸ“œindex.jsx
    â”‚       â”‚   â””â”€â”€ ğŸ“‚widgets/
    â”‚       â”‚       â”œâ”€â”€ ğŸ“‚<ì´ë¦„>/
    â”‚       â”‚       â”‚   â”œâ”€â”€ ğŸ“œindex.jsx
    â”‚       â”‚       â”‚   â””â”€â”€ ğŸ“œindex.scss
    â”‚       â”‚       â””â”€â”€ ...
    â”‚       â””â”€â”€ ğŸ“‚LandingPage/
    â”‚           â”œâ”€â”€ ğŸ“œindex.jsx
    â”‚           â””â”€â”€ ğŸ“‚widgets/
    â”‚               â”œâ”€â”€ ğŸ“‚<ì´ë¦„>/
    â”‚               â”‚   â”œâ”€â”€ ğŸ“œindex.jsx
    â”‚               â”‚   â””â”€â”€ ğŸ“œindex.scss
    â”‚               â””â”€â”€ ...
    â””â”€â”€ ğŸ“‚common/
        â”œâ”€â”€ ğŸ“‚api/
        â”‚   â””â”€â”€ ğŸ“œindex.js
        â”œâ”€â”€ ğŸ“‚assets/
        â”‚   â”œâ”€â”€ ğŸ“‚icons/
        â”‚   â”‚   â”œâ”€â”€ ğŸ“œ<ì´ë¦„.jsx>
        â”‚   â”‚   â””â”€â”€ ...
        â”‚   â””â”€â”€ ğŸ“‚images/
        â”‚       â”œâ”€â”€ ğŸ“œ<ì´ë¦„.png>
        â”‚       â”œâ”€â”€ ğŸ“œ<ì´ë¦„.jpg>
        â”‚       â””â”€â”€ ...
        â”œâ”€â”€ ğŸ“‚hooks/
        â”‚   â”œâ”€â”€ ğŸ“œ<ì´ë¦„.js>
        â”‚   â””â”€â”€ ...
        â”œâ”€â”€ ğŸ“‚models/
        â”‚   â”œâ”€â”€ ğŸ“œ<ì´ë¦„.js>
        â”‚   â””â”€â”€ ...
        â”œâ”€â”€ ğŸ“‚utilities/
        â”‚   â”œâ”€â”€ ğŸ“œ<ì´ë¦„.js>
        â”‚   â””â”€â”€ ...
        â””â”€â”€ ğŸ“‚widgets/
            â”œâ”€â”€ ğŸ“‚<ì´ë¦„>/
            â”‚   â”œâ”€â”€ ğŸ“œindex.jsx
            â”‚   â””â”€â”€ ğŸ“œindex.scss
            â””â”€â”€ ...
```

<br />

## <mark style={{background: "#FFB86CA6"}}>UX í–¥ìƒì„ ìœ„í•œ ê¸°ëŠ¥ êµ¬í˜„</mark>

### <mark style={{background: "#FFF3A3A6"}}>infinite scroll</mark>

#### <mark style={{background: "#BBFABBA6"}}>ê°œë…</mark>

interception observer APIë¼ëŠ” ìš”ì†Œê°€ í”„ë ˆì„ ì•ˆì— ë³´ì—¬ì§€ëŠ” ê²ƒì„ ê°ì§€í•˜ëŠ” APIë¥¼ ì´ìš©í•´ì„œ ìŠ¤í¬ë¡¤ì´ ë‚´ë ¤ê°€ì„œ ìš”ì†Œê°€ ë³´ì´ë©´ ê·¸ë•Œ fetchë¥¼ ìš”ì²­í•˜ì—¬ UXë¥¼ í–¥ìƒí•˜ëŠ” ê¸°ìˆ ì´ë‹¤.

ì²˜ìŒì— ë°ì´í„° ê´€ë ¨ fetch ìš”ì²­ì„ ì „ë¶€ ë³´ë‚´ì„œ í™”ë©´ì„ êµ¬ì„±í•˜ê²Œ ë˜ë©´ ë¶ˆí•„ìš”í•œ ì‹œê°„ì„ ë³´ë‚´ê²Œ ë˜ì„œ ë Œë”ë§ ìì²´ê°€ ëŠë ¤ì§€ê¸° ë•Œë¬¸ì— ëª©ë¡ í˜ì´ì§€ ê°™ì€ ë§ì€ ë°ì´í„°ë¥¼ ë°›ì•„ì•¼ í•˜ëŠ” í˜ì´ì§€ì—ì„œëŠ” ê¼­ í•„ìš”í•œ ê¸°ëŠ¥ì´ë‹¤.

#### <mark style={{background: "#BBFABBA6"}}>useInView</mark>

```jsx
const rootRef = useRef(null);
const { ref, inView, entry } = useInView({
  threshold: 1,
  root: rootRef.current,
});

useEffect(() => {
  if (inView) setMoreItems((prevMoreItems) => prevMoreItems + 5);
}, [inView]);

return (
  <ChartList $numbers={numberOfItem} ref={rootRef}>
    {status.isLoading ? (
      <div>ë¡œë”©í™”ë©´</div>
    ) : (
      <>
        {sortedItems?.map((item, index) => (
          <IdolChartCard key={item.id} item={item} index={index} />
        ))}
        {noMoreItem && (
          <RefreshSection ref={ref}>
            <div>{inView}</div>
            <RefreshImg src={refresh} />
          </RefreshSection>
        )}
      </>
    )}
  </ChartList>
);
```

useInView ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ë¨¼ì € rootRefë¡œ ì°íŒ elementë¥¼ root(í”„ë ˆì„ì˜ ê¸°ì¤€ì´ ë˜ëŠ” ìš”ì†Œ) ì˜µì…˜ì— ë„£ì–´ì„œ rootì„ì„ í‘œì‹œí•œ í›„

thresholdë¡œ ë³´ì—¬ì§€ëŠ” ë¹„ìœ¨(í”„ë ˆì„ ë‚´ì—ì„œ ë³´ì—¬ì§€ëŠ” ë¹„ìœ¨)ì„ ì§€ì •í•œë‹¤.

useInViewì˜ refê°€ thresholdë§Œí¼ rootì—ì„œ ë³´ì—¬ì§€ë©´ inViewê°€ trueë¡œ ë³€í•˜ê³  ì•„ë‹ˆë©´ falseë¡œ ë³€í•œë‹¤.

#### <mark style={{background: "#BBFABBA6"}}>fetchì™€ ì—°ê²°í•˜ì—¬ infinite scroll êµ¬í˜„</mark>

```jsx
export default function useInfiniteScroll(fetchFunction, options) {
  const rootRef = useRef(null);
  const [items, setItems] = useState([]);
  const [cursor, setCursor] = useState(0);
  const [status, wrappedFunction] = useGetData(fetchFunction);
  const { ref, inView } = useInView({
    threshold: 0,
    root: rootRef.current,
  });
  async function executeRefresh() {
    const { idols, nextCursor } = await wrappedFunction({
      ...options,
      cursor,
    });
    if (!idols) return;
    setCursor(nextCursor);
    setItems([...items, ...idols]);
  }

  useEffect(() => {
    if (inView && cursor !== null && cursor !== 0) {
      executeRefresh();
    } else if (items.length === 0) {
      executeRefresh();
    }
  }, [inView]);

  return { items, ref, status, rootRef };
}
```

cursorë¥¼ ê¸°ë°˜ìœ¼ë¡œ 10ê°œì”© ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ê²Œ ë˜ì–´ ìˆë‹¤. ref, rootRefë¥¼ propìœ¼ë¡œ ë‚´ë ¸ê¸° ë•Œë¬¸ì— infinitescrollì„ ì‚¬ìš©í•  ë•Œ ref, rootRefë§Œ ì§€ì •í•˜ë©´ useInviewì˜ ë¡œì§ì„ ëª°ë¼ë„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë§Œë“¤ì—ˆë‹¤.

useEffectë¡œ inViewë¥¼ ê°ì§€í•˜ì—¬ ë‚´ë¶€ì ìœ¼ë¡œ stateë¥¼ í†µí•´ ë°ì´í„°ê°€ ê´€ë¦¬ëœë‹¤.

#### <mark style={{background: "#BBFABBA6"}}>Trouble Shooting</mark>

**1. Event Bubblingìœ¼ë¡œ ì¸í•´ì„œ íŠ¹ì • ë¶€ë¶„ ìì‹ìš”ì†Œ í´ë¦­ì‹œ ë¶€ëª¨ ìš”ì†Œë¥¼ í´ë¦­í•˜ì§€ ì•Šì•˜ë˜ ë¬¸ì œ**

<img src="/images/2024-05-18/image-1.png" alt="event bubbling" />

Eventê°€ ìš”ì†Œê°€ ì²˜ìŒ ë°œìƒí•œ targetì„ ì°ìœ¼ë ¤ë©´ currentTargetì´ë¼ëŠ” Event Propertyë¥¼ ì‚¬ìš©í•´ì„œ í•´ê²°í•˜ì˜€ë‹¤.

**2. interception observer ì‚¬ìš©ì‹œ ì›¹ ë¸Œë¼ìš°ì € í™•ëŒ€ ë¬¸ì œ**

ë¸Œë¼ìš°ì € í™•ëŒ€ì‹œ thresholdê°€ í™”ë©´ê³¼ ë‹¤ë¥´ê²Œ ì„¤ì •ë˜ê¸° ë•Œë¬¸ì— 100%ë¡œ ë§ì¶°ë†“ê³  í•´ì•¼ interception observerê°€ ì‘ë™í•œë‹¤.

<s>ì›ì¸ì„ ì•Œì•˜ì„ ë•Œ ì†Œë¦¬ì§ˆë €ë‹¤.</s>

**3. inViewê°€ ë‘ë²ˆ ì²˜ë¦¬ë˜ë˜ ë¬¸ì œ**

inView ìì²´ë¥¼ useEffectì˜ depsì— ë„£ê³  ì‚¬ìš©í•˜ë©´ inViewê°€ ë‘ë²ˆ ì²˜ë¦¬ë˜ê²Œ ëœë‹¤.

inViewê°€ true > falseì¼ ë•Œë„ ì‘ë™í•˜ê³  false > trueì¼ ë•Œë„ ì‘ë™í•˜ê²Œ ëœë‹¤.

infinite scrollì„ ìƒê°í•´ë³´ë©´ inViewê°€ ë³´ì¼ë•Œ true, ë‹¤ìŒ ë°ì´í„°ë¥¼ ë¡œë”©í•  ë•Œ falseì´ê¸° ë•Œë¬¸ì— ë‘ë²ˆ ì‘ë™í•˜ëŠ”ê²Œ ë‹¹ì—°í•˜ë‹¤.

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” if (inView)ê°™ì€ ì¡°ê±´ì„ useEffect ë‚´ì— ë‹¬ì•„ì„œ í•œë²ˆë§Œ ì‘ë™ë˜ê²Œ ë°”ê¾¸ë©´ ëœë‹¤.

#### <mark style={{background: "#BBFABBA6"}}>ê²°ê³¼</mark>

<img
  src="/images/2024-05-18/fandom-k-infinite-scroll.gif"
  alt="fandom-k infinite scroll"
/>

### <mark style={{background: "#FFF3A3A6"}}>skeleton</mark>

#### <mark style={{background: "#BBFABBA6"}}>ê°œë…</mark>

ìœ íŠœë¸Œ í™ˆí™”ë©´ì—ì„œ í”í•˜ê²Œ ë³¼ ìˆ˜ ìˆëŠ” UXë¥¼ í–¥ìƒí•˜ëŠ” ë°©ë²•ì¸ë° ë°ì´í„°ê°€ ë¶ˆëŸ¬ì˜¤ê¸° ì „ì— í™”ë©´ì˜ ìœ¤ê³½ì„ ë¨¼ì € ê·¸ë ¤ì¤˜ì„œ ì‚¬ìš©ìì˜ ì´íƒˆì„ ë§‰ëŠ” ê¸°ëŠ¥ì´ë‹¤.

ëª©ë¡ í˜ì´ì§€ì—ëŠ” infinite scrollë¡œ ë°›ì•„ì˜¤ëŠ” ë°ì´í„°ê°€ ë§ì€ë° ì´ë•Œ ì´ë¥¼ ë‹¨ìˆœí•œ ë¡œë”© ì•„ì´ì½˜ìœ¼ë¡œ ì²˜ë¦¬í•˜ë©´ UXê°€ ì¢‹ì§€ ì•Šì„ ê²ƒì´ë‹¤.

#### <mark style={{background: "#BBFABBA6"}}>êµ¬í˜„</mark>

styled-componentsì˜ cssë¥¼ ì“°ë©´ css íŒŒì¼ ìì²´ë¥¼ cssê·¸ ìì²´ë¡œ ìƒì†í•  ìˆ˜ ìˆë‹¤.

```js
// css
import { css } from "styled-components";
import { skeleton } from "./keyframes";

export default css`
Â  background-color: #363636;
Â  position: relative;
Â  overflow: hidden;
Â  z-index: 1;
Â  &:after {
Â  Â  content: " ";
Â  Â  display: block;
Â  Â  position: absolute;
Â  Â  left: 0;
Â  Â  right: 0;
Â  Â  height: 100%;
Â  Â  background-repeat: no-repeat;
Â  Â  background-image: linear-gradient(
Â  Â  Â  90deg,
Â  Â  Â  rgba(54, 54, 54, 1) 20%,
Â  Â  Â  rgba(144, 144, 144, 1) 50%,
Â  Â  Â  rgba(54, 54, 54, 1) 80%
Â  Â  );
Â  Â  transform: translateX(-100%);
Â  Â  animation-name: ${skeleton};
Â  Â  animation-duration: 1.5s;
Â  Â  animation-iteration-count: infinite;
Â  Â  animation-timing-function: ease-in-out;
Â  Â  animation-direction: normal;
Â  }
`;
// ...
// keyframe
export const skeleton = keyframes`
Â  100% {
Â  Â  transform: translateX(100%);
Â  }
`;
```

ìœ„ ì½”ë“œì²˜ëŸ¼ ìŠ¤ì¼ˆë ˆí†¤ì— ê¸°ë³¸ cssë¥¼ ì‘ì„±í•œë‹¤.

styled-componentsì˜ keyframesì„ ì‚¬ìš©í•´ì„œ ì• ë‹ˆë©”ì´ì…˜ì„ ì œì‘í•œ í›„ì— ì´ë¥¼ cssì— ë¶™íŒ í›„ ì˜µì…˜ì„ í†µí•´ 1.5ì´ˆ ë¬´í•œìœ¼ë¡œ ë°˜ë³µë˜ëŠ” linear-gradientë¥¼ ë§Œë“¤ì—ˆë‹¤.

```jsx
const SkeletonNameBlock = styled.div`
Â  width: 120px;
Â  height: 15px;
Â  border-radius: 10px;
Â  ${skeletonStyle};
`;
```

ë°ì´í„°ê°€ ë“¤ì–´ê°€ëŠ” ìš”ì†Œì™€ ë¹„ìŠ·í•œ ìš”ì†Œì— í•´ë‹¹ ì• ë‹ˆë©”ì´ì…˜ì„ ë„£ì–´ì£¼ê³  ì´ë¥¼ infinite scrollê³¼ ì—°ê²°í•˜ì—¬ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ëŠ” ë™ì•ˆì—ëŠ” ìŠ¤ì¼ˆë ˆí†¤ ì´ë¯¸ì§€ê°€ ëŒ€ì‹  ë³´ì´ë„ë¡ êµ¬í˜„í•´ì¤€ë‹¤.

```jsx
export default function MonthChartList({ gender, isactive }) {
  const { items, ref, status, rootRef } = useInfiniteScroll(getCharts, {
    gender,
  });

  return (
    <ChartList
      ref={rootRef}
      style={{ display: isactive === true ? "grid" : "none" }}
    >
      Â  Â  Â {" "}
      {items?.map((item, index) => (
        <IdolChartCard key={item.id} item={item} index={index} ref={ref} />
      ))}
      Â  Â  Â {" "}
      {status.isLoading &&
        Array.from(Array(10)).map((_, index) => (
          <IdolChartCardSkeleton key={index} />
        ))}
      Â  Â {" "}
    </ChartList>
  );
}
```

#### <mark style={{background: "#BBFABBA6"}}>ê²°ê³¼</mark>

<img src="/images/2024-05-18/fandom-k-skeleton.gif" alt="fandom-k skeleton" />

#### <mark style={{background: "#BBFABBA6"}}>Trouble Shooting</mark>

1. (styled component) classNameì´ ì§ì ‘ ë“¤ì–´ê°€ì§€ ì•Šì•„ì„œ ì ìš©ë˜ì§€ ì•Šì•˜ë˜ ë¬¸ì œ

styled componentê°€ ì ìš©ë˜ê¸° ìœ„í•´ì„œëŠ” í•´ë‹¹ HTMLElementì— ì§ì ‘ classNameì´ ìˆì–´ì•¼ í•œë‹¤.

```jsx
export function Heading({ children, className }) {
  return <HeadingContainer className={className}>{children}</HeadingContainer>;
}
```

ì´ ìƒíƒœë©´ HeadingContainerì— classNameì€ styled componenetê°€ ì´ë¯¸ ë§Œë“¤ì—ˆê¸° ë•Œë¬¸ì— propìœ¼ë¡œ ë°›ì€ classNameì´ í•´ë‹¹ componentë¡œ ë‚´ë ¤ê°€ì§€ ì•Šì•„ì„œ ê·¸ê²ƒì— ì ìš©ëœ ìŠ¤íƒ€ì¼ë§ë„ ì ìš©ë˜ì§€ ì•Šê²Œ ëœë‹¤.

```jsx
export function Heading({ children, className }) {
  return (
    <div className={className}>
      Â  Â  Â  <HeadingContainer>{children}</HeadingContainer>Â  Â {" "}
    </div>
  );
}
```

ì´ëŸ°ì‹ìœ¼ë¡œ classNameì„ ì „ë‹¬ ë°›ëŠ” í•˜ë‚˜ì˜ Elementê°€ ìˆì–´ì•¼ ìŠ¤íƒ€ì¼ë§ì´ ê·¸ëŒ€ë¡œ ì ìš©ë˜ê²Œ ëœë‹¤.

<details>
<summary>í„°ë¯¸ë„, gitê´€ë ¨ ë¬¸ì œ</summary>

**Terminal**

<br />

WSLì„ vscodeì—ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì€ remoteë¡œ ì°ëŠ” ê²ƒì´ë‹¤.

<br />

ì™¼ìª½ ì•„ë˜ì— ë²„íŠ¼ì„ í†µí•´ì„œ ì»¨íŠ¸ë¡¤í•˜ê²Œ êµ¬í˜„ë˜ì–´ ìˆë‹¤.

<br />

**Git**

<br />

git squash mergeë¥¼ ì´ìš©í•˜ë©´ commitì˜ ë‚´ìš©ì„ í•œ ì»¤ë°‹ìœ¼ë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤.

<br />

ì´í›„ ê¸°ì¡´ì˜ feature ë¸Œëœì¹˜ëŠ” ì‚­ì œí•˜ê³  ìƒˆë¡œìš´ featureë¥¼ ìƒì„±í•´ì•¼í•œë‹¤.

<br />

</details>

> ì½”ë“œì‡ í”„ë¡œì íŠ¸ ì§„í–‰ ì¤‘ì— ê²ªì€ ê²½í—˜ë“¤ì…ë‹ˆë‹¤.
>
> ë¬¸ì œê°€ ë˜ëŠ” ë¶€ë¶„ì´ ìˆë‹¤ê³  ìš”ì²­ ì£¼ì‹œë©´ ì‚­ì œí•˜ê² ìŠµë‹ˆë‹¤.
>
> ê°ì‚¬í•©ë‹ˆë‹¤.
