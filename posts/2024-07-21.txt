1:"$Sreact.fragment"
2:I[4480,["275","static/chunks/275-37076645b7fabe60.js","711","static/chunks/711-2e7798a9f451dfd2.js","702","static/chunks/702-06769fc6cb7dd61f.js","859","static/chunks/859-2e3810e8cb8b2a7a.js","845","static/chunks/845-2f7bc315f3802e5b.js","177","static/chunks/app/layout-397dcad387a70f0b.js"],"GoogleTagManager"]
3:I[3205,["275","static/chunks/275-37076645b7fabe60.js","711","static/chunks/711-2e7798a9f451dfd2.js","702","static/chunks/702-06769fc6cb7dd61f.js","859","static/chunks/859-2e3810e8cb8b2a7a.js","845","static/chunks/845-2f7bc315f3802e5b.js","177","static/chunks/app/layout-397dcad387a70f0b.js"],"default"]
4:I[7643,["275","static/chunks/275-37076645b7fabe60.js","711","static/chunks/711-2e7798a9f451dfd2.js","702","static/chunks/702-06769fc6cb7dd61f.js","859","static/chunks/859-2e3810e8cb8b2a7a.js","845","static/chunks/845-2f7bc315f3802e5b.js","177","static/chunks/app/layout-397dcad387a70f0b.js"],"SidebarProvider"]
5:I[379,["275","static/chunks/275-37076645b7fabe60.js","711","static/chunks/711-2e7798a9f451dfd2.js","702","static/chunks/702-06769fc6cb7dd61f.js","859","static/chunks/859-2e3810e8cb8b2a7a.js","845","static/chunks/845-2f7bc315f3802e5b.js","177","static/chunks/app/layout-397dcad387a70f0b.js"],"default"]
c:I[1484,["219","static/chunks/app/global-error-cab15e159dca7270.js"],"default"]
:HL["https://codefug.github.io/_next/static/media/518331124efecf5c-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["https://codefug.github.io/_next/static/css/560594e4c790f86c.css","style"]
:HL["https://codefug.github.io/_next/static/css/0944061766e538e2.css","style"]
:HL["https://codefug.github.io/_next/static/css/fc37ac2b1a278e8c.css","style"]
0:{"P":null,"b":"XT7kQrlLJedlNhUJWScUi","p":"https://codefug.github.io","c":["","posts","2024-07-21"],"i":false,"f":[[["",{"children":["posts",{"children":[["id","2024-07-21","d"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"https://codefug.github.io/_next/static/css/560594e4c790f86c.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"https://codefug.github.io/_next/static/css/0944061766e538e2.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"ko","suppressHydrationWarning":true,"children":[["$","$L2",null,{"gtmId":"$undefined"}],["$","body",null,{"className":"__className_75a1fa antialiased","children":["$","$L3",null,{"attribute":"class","defaultTheme":"system","enableSystem":true,"disableTransitionOnChange":true,"children":["$","$L4",null,{"defaultOpen":false,"children":[["$","$L5",null,{"totalFrontMatterList":[{"id":"2025-07-20","title":"집합","excerpt":"JS의 집합에 대해서 알아보자.","date":"2025-07-20","categories":["data-structure","javascript"],"header":{"teaser":"/images/2025-07-20/Pasted image 20250720151432.png"}},{"id":"2025-06-21","title":"트리","excerpt":"JS의 트리에 대해서 알아보자.","date":"2025-06-21","categories":["data-structure","javascript"],"header":{"teaser":"/images/2025-06-21/Pasted image 20250621101921.png"}},{"id":"2025-06-14","title":"해시","excerpt":"JS의 해시에 대해서 알아보자.","date":"2025-06-14","categories":["data-structure","javascript"],"header":{"teaser":"/images/2025-06-14/Pasted image 20250617224108.png"}},{"id":"2025-06-07","title":"큐","excerpt":"JS의 큐에 대해서 알아보자.","date":"2025-06-07","categories":["data-structure","javascript"],"header":{"teaser":"/images/2025-06-07/Pasted image 20250617212028.png"}},{"id":"2025-05-31","title":"스택","excerpt":"JS의 스택에 대해서 알아보자.","date":"2025-05-31","categories":["data-structure","javascript"],"header":{"teaser":"/images/2025-05-31/Pasted image 20250617080823.png"}},{"id":"2025-05-24","title":"배열","excerpt":"JS의 배열에 대해서 알아보자.","date":"2025-05-24","categories":["data-structure","javascript"],"header":{"teaser":"/images/2025-05-24/Pasted image 20250615181200.png"}},{"id":"2024-11-10","title":"Asynchronous JavaScript","excerpt":"microtask queue, macrotask queue, call stack, web api와 관련된 비동기 동작 방식, 비동기 관련 역사와 비동기 코드의 다양한 활용법들을 알아보자.","date":"2024-11-10","categories":["javascript"],"header":{"teaser":"/images/logos/JS.svg"}},{"id":"2024-09-14-4","title":"(꼼꼼 프로젝트) streaming 방식의 tanstack query","excerpt":"infinite scroll, optimistic update 그리고 streaming 방식이 결합된 쿼리 처리 ( useSuspenseQuery, useSuspenseInfiniteQuery )","date":"2024-09-14","categories":["kkom-kkom"],"header":{"teaser":"/images/logos/tanstackQuery.png"}},{"id":"2024-09-14-3","title":"(꼼꼼 프로젝트) 클라이언트와 서버 둘다 호환되는 fetch 구현","excerpt":"서버 액션을 활용한 refresh token rotation, 커링 함수를 이용한 리팩토링","date":"2024-09-14","categories":["kkom-kkom"],"header":{"teaser":"/images/logos/fetch.png"}},{"id":"2024-09-14-2","title":"(꼼꼼 프로젝트) startTransition, progress bar 구현에 대한 고민","excerpt":"progress bar 로직 연구하기(startTransition), next-nprogress-bar","date":"2024-09-14","categories":["kkom-kkom"],"header":{"teaser":"/images/logos/nprogress.png"}},{"id":"2024-09-14-1","title":"(꼼꼼 프로젝트) toss slash 분석, zustand와 연결된 커스텀 overlay 훅 구현","excerpt":"stacking context, compound pattern, 전역 상태를 활용한다는 것의 의미, 토스 개발자 실력 흡수하기","date":"2024-09-14","categories":["kkom-kkom"],"header":{"teaser":"/images/logos/toss.png"}},{"id":"2024-09-11","title":"(꼼꼼 프로젝트) 공통 버튼 컴포넌트의 종류를 쉽게 관리하고 누구나 쉽게 확인할 수 있게 하는 방법","excerpt":"tailwind로 조건부 처리를 간편하게 하는 방법, 비개발자도 스타일을 쉽게 확인할 수 있도록 storybook 연동","date":"2024-09-11","categories":["kkom-kkom"],"header":{"teaser":"/images/logos/storybook.png"}},{"id":"2024-07-22-2","title":"(급페이 프로젝트) 개발환경에만 집중하기 위한 여정","excerpt":"접근 제한을 위한 미들웨어 처리, vercel CLI을 이용한 organization 무료 자동 배포, 프리뷰","date":"2024-07-22","categories":["gheuppay"],"header":{"teaser":"/images/logos/vercel.png"}},{"id":"2024-07-22-1","title":"(급페이 프로젝트) 알림창 무한 스크롤을 위한 여정 (mock fetching을 위한 MSW 도입기)","excerpt":"msw를 활용해서 프론트엔드 개발이 다 되어있지 않은 상태에서도 무한 스크롤 구현을 확인할 수 있게 되었습니다.","date":"2024-07-22","categories":["gheuppay"],"header":{"teaser":"/images/logos/msw.png"}},{"id":"2024-07-21","title":"(급페이 프로젝트) 카드 렌더링을 최적화하여 UX를 향상시키기 위한 머나먼 여정","excerpt":"server component 설계를 이용한 suspense 적극 활용, 이를 위해서 next cookie를 사용하면서 겪은 문제들을 적은 글입니다.","date":"2024-07-21","categories":["gheuppay"],"header":{"teaser":"/images/logos/next-cookie.png"}},{"id":"2024-06-18","title":"React Testing","excerpt":"React Testing Library, Vitest, Jest","date":"2024-06-18","categories":["reactdeepdive"],"header":{"teaser":"/images/logos/reactdeepdive.jpg"}},{"id":"2024-06-17","title":"로그인 구현 (zustand, zod + react-hook-form, RTR)","excerpt":"zustand를 이용한 로그인 상태 전역 관리, zod를 이용한 간단한 스키마 전개, react-hook-form을 이용한 간단한 validation, axios를 이용한 간단한 api 요청 처리","date":"2024-06-17","categories":["react"],"header":{"teaser":"/images/logos/zod.png"}},{"id":"2024-06-15","title":"Dev tool","excerpt":"리액트 과거, 현재, 미래","date":"2024-06-15","categories":["web"],"header":{"teaser":"/images/logos/reactdeepdive.jpg"}},{"id":"2024-06-14","title":"마이그레이션 중 발생한 Vite 환경 변수 처리","excerpt":"Vite_ENV","date":"2024-06-14","categories":["react"],"header":{"teaser":"/images/logos/react.png"}},{"id":"2024-06-10","title":"React Debugging","excerpt":"react-dev-tools 정리, 실습","date":"2024-06-10","categories":["react"],"header":{"teaser":"/images/logos/react.png"}},{"id":"2024-06-08","title":"자잘한 Next.js 트러블 슈팅들","excerpt":"react-responsive를 사용하지 못하는 상황, dotenv 사용시 문제 발생","date":"2024-06-08","categories":["nextjs"],"header":{"teaser":"/images/logos/Nextjs.png"}},{"id":"2024-05-31","title":"Next는 왜 쓸까","excerpt":"CSR SSG SSR","date":"2024-05-31","categories":["nextjs"],"header":{"teaser":"/images/logos/Nextjs.png"}},{"id":"2024-05-23","title":"리액트는 왜 쓸까","excerpt":"리액트 과거, 현재, 미래","date":"2024-05-23","categories":["react"],"header":{"teaser":"/images/logos/reactdeepdive.jpg"}},{"id":"2024-05-22","title":"TS는 왜 쓸까 (위대한 TS)","excerpt":"JS를 완벽하게 하기 위한 여정","date":"2024-05-22","categories":["typescript"],"header":{"teaser":"/images/logos/TS.png"}},{"id":"2024-05-20","title":"Fandom-k 프로젝트 회고3","excerpt":"Github Actions, 최종 결과","date":"2024-05-20","categories":["fandomk"],"header":{"teaser":"/images/logos/githubActions.png"}},{"id":"2024-05-19","title":"Fandom-k 프로젝트 회고2","excerpt":"fetch, scroll to Top, infinite scroll 라이브러리 제거","date":"2024-05-19","categories":["fandomk"],"header":{"teaser":"/images/logos/fetch.png"}},{"id":"2024-05-18","title":"Fandom-k 프로젝트 회고1","excerpt":"팀 프로젝트 세팅, infinite scroll, skeleton","date":"2024-05-18","categories":["fandomk"],"header":{"teaser":"/images/logos/infinite-scroll.png"}}]}],"$L6"]}]}]}]]}]]}],{"children":["posts","$L7",{"children":[["id","2024-07-21","d"],"$L8",{"children":["__PAGE__","$L9",{},null,false]},null,false]},null,false]},["$La",[],[]],false],"$Lb",false]],"m":"$undefined","G":["$c",[]],"s":false,"S":true}
d:I[995,["275","static/chunks/275-37076645b7fabe60.js","711","static/chunks/711-2e7798a9f451dfd2.js","702","static/chunks/702-06769fc6cb7dd61f.js","859","static/chunks/859-2e3810e8cb8b2a7a.js","845","static/chunks/845-2f7bc315f3802e5b.js","177","static/chunks/app/layout-397dcad387a70f0b.js"],"default"]
e:I[1423,[],""]
f:I[9235,[],""]
10:I[1702,["702","static/chunks/702-06769fc6cb7dd61f.js","345","static/chunks/app/not-found-f1d1741ea9f777fb.js"],""]
11:I[3732,["507","static/chunks/app/posts/%5Bid%5D/layout-00a6dbf17396ee76.js"],"default"]
13:I[8445,[],"OutletBoundary"]
15:I[7867,[],"AsyncMetadataOutlet"]
17:I[3275,["275","static/chunks/275-37076645b7fabe60.js","711","static/chunks/711-2e7798a9f451dfd2.js","702","static/chunks/702-06769fc6cb7dd61f.js","880","static/chunks/app/posts/%5Bid%5D/page-29bdb118dd6abf99.js"],"Image"]
18:I[8445,[],"ViewportBoundary"]
1a:I[8445,[],"MetadataBoundary"]
1b:"$Sreact.suspense"
6:["$","$Ld",null,{"children":["$","$Le",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$Lf",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","div",null,{"children":[["$","h2",null,{"children":"Not Found"}],["$","p",null,{"children":"잘못된 페이지에요!"}],["$","$L10",null,{"href":"/","children":"홈으로 돌아가기"}]]}],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]
7:["$","$1","c",{"children":[null,["$","$Le",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$Lf",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}]
8:["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"https://codefug.github.io/_next/static/css/fc37ac2b1a278e8c.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","div",null,{"className":"prose mx-auto mb-10 overflow-auto dark:prose-invert","children":[["$","$Le",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$Lf",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}],["$","$L11",null,{}]]}]]}]
9:["$","$1","c",{"children":["$L12",null,["$","$L13",null,{"children":["$L14",["$","$L15",null,{"promise":"$@16"}]]}]]}]
a:["$","div","l",{"className":"flex h-full items-center justify-center","children":["$","div",null,{"className":"flex flex-col items-center","children":[["$","div",null,{"className":"scale-[1.15] animate-pulse transition-transform","children":["$","$L17",null,{"src":"/images/main-logo.png","alt":"로딩 중...","width":120,"height":120,"className":"drop-shadow-lg"}]}],["$","p",null,{"className":"mt-6 animate-pulse text-lg font-bold text-gray-600","children":"Codefug Blog"}]]}]}]
b:["$","$1","h",{"children":[null,[["$","$L18",null,{"children":"$L19"}],["$","meta",null,{"name":"next-size-adjust","content":""}]],["$","$L1a",null,{"children":["$","div",null,{"hidden":true,"children":["$","$1b",null,{"fallback":null,"children":"$L1c"}]}]}]]}]
19:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
14:null
1d:I[9283,[],"IconMark"]
16:{"metadata":[["$","title","0",{"children":"Codefug Blog"}],["$","meta","1",{"name":"description","content":"프로젝트 경험과 개발 노트를 공유하는 블로그"}],["$","meta","2",{"name":"author","content":"Codefug"}],["$","meta","3",{"name":"keywords","content":"개발,프로그래밍,React,Next.js,JavaScript,TypeScript,블로그"}],["$","meta","4",{"name":"creator","content":"Codefug"}],["$","meta","5",{"name":"publisher","content":"Codefug"}],["$","meta","6",{"property":"og:title","content":"Codefug Blog"}],["$","meta","7",{"property":"og:description","content":"project experiences and development notes"}],["$","meta","8",{"property":"og:url","content":"https://codefug-blog.vercel.app"}],["$","meta","9",{"property":"og:image","content":"https://codefug.github.io/images/main-logo.png"}],["$","meta","10",{"property":"og:image:alt","content":"Codefug Blog"}],["$","meta","11",{"property":"og:type","content":"website"}],["$","meta","12",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","13",{"name":"twitter:title","content":"Codefug Blog"}],["$","meta","14",{"name":"twitter:description","content":"project experiences and development notes"}],["$","meta","15",{"name":"twitter:image","content":"https://codefug.github.io/images/main-logo.png"}],["$","meta","16",{"name":"twitter:image:alt","content":"Codefug Blog"}],["$","link","17",{"rel":"icon","href":"/icon.ico?f00882ffa3186f37","type":"image/x-icon","sizes":"16x16"}],["$","$L1d","18",{}]],"error":null,"digest":"$undefined"}
1c:"$16:metadata"
1e:I[3499,["275","static/chunks/275-37076645b7fabe60.js","711","static/chunks/711-2e7798a9f451dfd2.js","702","static/chunks/702-06769fc6cb7dd61f.js","880","static/chunks/app/posts/%5Bid%5D/page-29bdb118dd6abf99.js"],"GtmPageView"]
1f:I[5276,["275","static/chunks/275-37076645b7fabe60.js","711","static/chunks/711-2e7798a9f451dfd2.js","702","static/chunks/702-06769fc6cb7dd61f.js","880","static/chunks/app/posts/%5Bid%5D/page-29bdb118dd6abf99.js"],"default"]
12:["$","section",null,{"children":[["$","$L1e",null,{"slug":"2024-07-21"}],["$","header",null,{"className":"mb-8","children":[["$","div",null,{"className":"relative mb-6 h-[300px] w-full overflow-hidden rounded-xl sm:h-[400px] md:h-[450px]","children":[["$","$L17",null,{"src":"/images/logos/next-cookie.png","alt":"(급페이 프로젝트) 카드 렌더링을 최적화하여 UX를 향상시키기 위한 머나먼 여정","fill":true,"sizes":"(max-width: 768px) 100vw, 1200px","priority":true,"className":"object-cover object-center transition-transform duration-500 hover:scale-105"}],["$","div",null,{"className":"absolute inset-0 bg-gradient-to-b from-transparent to-black/70"}],["$","div",null,{"className":"absolute left-4 top-4 flex flex-wrap gap-2 sm:left-6 sm:top-6","children":[["$","div","gheuppay",{"className":"inline-flex items-center rounded-md border px-2.5 py-0.5 transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-white/90 text-xs font-medium text-gray-800 hover:bg-white sm:text-sm","children":[["$","svg",null,{"ref":"$undefined","xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-tag mr-1 h-3 w-3","children":[["$","path","vktsd0",{"d":"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"}],["$","circle","kqv944",{"cx":"7.5","cy":"7.5","r":".5","fill":"currentColor"}],"$undefined"]}]," ","gheuppay"]}]]}]]}],["$","div",null,{"className":"mb-6 space-y-4","children":[["$","h1",null,{"className":"mb-0 text-3xl font-bold tracking-tight text-gray-900 dark:text-gray-50 sm:text-4xl md:text-5xl","children":"(급페이 프로젝트) 카드 렌더링을 최적화하여 UX를 향상시키기 위한 머나먼 여정"}],["$","div",null,{"className":"flex items-center justify-end gap-4 text-sm text-gray-600 dark:text-gray-400","children":["$","div",null,{"className":"flex items-center","children":[["$","svg",null,{"ref":"$undefined","xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-calendar-days mr-2 h-4 w-4","children":[["$","path","1cmpym",{"d":"M8 2v4"}],["$","path","4m81vk",{"d":"M16 2v4"}],["$","rect","1hopcy",{"width":"18","height":"18","x":"3","y":"4","rx":"2"}],["$","path","8toen8",{"d":"M3 10h18"}],["$","path","6423bh",{"d":"M8 14h.01"}],["$","path","1etili",{"d":"M12 14h.01"}],["$","path","1gbofw",{"d":"M16 14h.01"}],["$","path","lrp35t",{"d":"M8 18h.01"}],["$","path","mhygvu",{"d":"M12 18h.01"}],["$","path","kzsmim",{"d":"M16 18h.01"}],"$undefined"]}],["$","time",null,{"dateTime":"2024-07-21","children":"2024-07-21"}]]}]}],["$","p",null,{"className":"text-lg leading-relaxed text-gray-600 dark:text-gray-300 md:text-xl","children":"server component 설계를 이용한 suspense 적극 활용, 이를 위해서 next cookie를 사용하면서 겪은 문제들을 적은 글입니다."}]]}],["$","div",null,{"className":"border-b border-gray-200 dark:border-gray-800"}]]}],["$","section",null,{"className":"lg:flex lg:items-baseline","children":[["$","$L1f",null,{}],["$","section",null,{"className":"max-w-full","children":[["$","h1",null,{"id":0,"className":"hltr-red","children":"설계"}],"\n",["$","p",null,{"children":["$","img",null,{"src":"/images/2024-07-21/Pasted%20image%2020240722113132.png","alt":""}]}],"\n",["$","p",null,{"children":"위의 시안을 분석해보고 Next.js 식으로 최대한 서버 컴포넌트를 이용하려면 다음과 같이 분기를 나눠서 생각해보면 다음과 같습니다."}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":["위쪽의 메인이 되는 카드 : 초기 페이지 렌더링 시 서버에서 받아오고 suspense로 기다리는 시간 보완. (server component)","\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":"신청하기 버튼의 경우 로그인 상태에 따라서 여러가지 분기가 나뉘어지게 설계. (이벤트 핸들러가 들어가기 때문에 client component)"}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["최근에 본 공고 파트 : 앞에서 데이터가 들어오면 뒤의 데이터는 없어져야 하니 ",["$","code",null,{"children":"queue"}]," 자료구조로 설계 (server component)"]}],"\n"]}],"\n",["$","p",null,{"children":["$","img",null,{"src":"/images/2024-07-21/Pasted%20image%2020240722120938.png","alt":""}]}],"\n",["$","p",null,{"children":"(red : server component, blue: client component)"}],"\n",["$","h2",null,{"id":1,"className":"hltr-orange","children":"서버 컴포넌트 설계"}],"\n",["$","p",null,{"children":"서버 컴포넌트를 설계하기 위해선 페이지 단위에서 일단 서버 컴포넌트여야 합니다. 최상단의 컴포넌트가 클라이언트 컴포넌트일 경우 서버 컴포넌트를 사용할 수 없게 되기 때문입니다."}],"\n","$L20","\n","$L21","\n","$L22","\n","$L23","\n","$L24","\n","$L25","\n","$L26","\n","$L27","\n","$L28","\n","$L29","\n","$L2a","\n","$L2b","\n","$L2c","\n","$L2d","\n","$L2e","\n","$L2f","\n","$L30","\n","$L31","\n","$L32","\n","$L33","\n","$L34","\n","$L35","\n","$L36","\n","$L37","\n","$L38","\n","$L39","\n","$L3a","\n","$L3b","\n","$L3c","\n","$L3d","\n","$L3e","\n","$L3f","\n","$L40","\n","$L41","\n","$L42","\n","$L43","\n","$L44","\n","$L45","\n","$L46","\n","$L47","\n","$L48","\n","$L49","\n","$L4a","\n","$L4b","\n","$L4c","\n","$L4d","\n","$L4e","\n","$L4f","\n","$L50","\n","$L51","\n","$L52","\n","$L53","\n","$L54","\n","$L55","\n","$L56","\n","$L57","\n","$L58","\n","$L59","\n","$L5a","\n","$L5b","\n","$L5c","\n","$L5d","\n","$L5e","\n","$L5f","\n","$L60","\n","$L61","\n","$L62","\n","$L63","\n","$L64","\n","$L65","\n","$L66","\n","$L67","\n","$L68","\n","$L69","\n","$L6a","\n","$L6b","\n","$L6c","\n","$L6d","\n","$L6e","\n","$L6f","\n","$L70","\n","$L71","\n","$L72","\n","$L73","\n","$L74","\n","$L75","\n","$L76","\n","$L77","\n","$L78","\n","$L79","\n","$L7a","\n","$L7b","\n","$L7c","\n","$L7d","\n","$L7e","\n","$L7f","\n","$L80","\n","$L81","\n","$L82","\n","$L83","\n","$L84"]}]]}]]}]
20:["$","blockquote",null,{"children":["\n",["$","p",null,{"children":"RCC (React Client Component) 는 서버 컴포넌트를 import할 수 없습니다. 서버 환경이 브라우저에 존재하지 않기 때문입니다."}],"\n"]}]
21:["$","p",null,{"children":"서버 컴포넌트를 사용할 경우 Next.js 에서는 각각의 컴포넌트를 따로 loading할 수 있는 streaming 방식을 사용합니다."}]
22:["$","p",null,{"children":["$","img",null,{"src":"/images/2024-07-21/Pasted%20image%2020240722121441.png","alt":""}]}]
23:["$","p",null,{"children":["컴포넌트 별로 분할해서 loading state를 처리하는 방법은 리액트의 ",["$","code",null,{"children":"Suspense"}],"를 사용하는 것입니다. next에서 확장시킨 ",["$","code",null,{"children":"Suspense"}],"로 서버 컴포넌트를 감싸면 서버 컴포넌트가 렌더링 되기 전까지 ",["$","code",null,{"children":"fallback"}]," 안에 있는 컴포넌트가 해당 서버 컴포넌트를 대신합니다."]}]
24:["$","p",null,{"children":["$","img",null,{"src":"/images/2024-07-21/Pasted%20image%2020240722121816.png","alt":""}]}]
25:["$","blockquote",null,{"children":["\n",["$","p",null,{"children":"TTFB : 첫 바이트까지의 시간\nFCP : 최초 컨텐츠가 페인팅되기까지의 시간\nTTI : 사용자가 인터렉션을 할 수 있게 되는 시간"}],"\n"]}]
26:["$","p",null,{"children":"위 사진은 streaming 이전의 방식입니다. 모든 컴포넌트가 렌더링이 되야 페이지가 로딩되기 때문에 TTFB, FCP, TTI 가 순차적으로 보여질 수 밖에 없었습니다."}]
27:["$","p",null,{"children":"로딩 화면이 모두 끝나고 페이지에 진입할 수 있도록 강제하는 것은 UX적으로 안 좋을 수 밖에 없습니다."}]
28:["$","p",null,{"children":"예를 들어 네이버에 웹툰을 보러 들어갔는데 웹툰 페이지 진입 버튼 하나를 누르기 위해서 스포츠, 연예, 뉴스 모든 컨텐츠가 사용가능한 상태가 되기까지 기다리는 것은 페이지 성능이 좋아서 빨리 로딩되더라도 더 최적화할 여지가 있는 것입니다."}]
29:["$","p",null,{"children":"Next는 이를 streaming으로 해결했습니다."}]
2a:["$","p",null,{"children":["$","img",null,{"src":"/images/2024-07-21/Pasted%20image%2020240722121647.png","alt":""}]}]
2b:["$","p",null,{"children":"각각의 컴포넌트는 각각의 파트를 가집니다. 데이터를 받고 HTML을 렌더링하고 하이드레이션하는 과정들을 각각 가짐으로써 TTFB, FCP, TTI를 모두 당기게 되어 페이지 성능 최적화를 이끌게 됩니다."}]
2c:["$","blockquote",null,{"children":["\n",["$","p",null,{"children":"급페이 프로젝트에서는 이를 최대한 활용하며 개발을 나아갔습니다."}],"\n"]}]
2d:["$","h2",null,{"id":2,"className":"hltr-orange","children":"Next Cookie를 이용한 설계"}]
2e:["$","p",null,{"children":"React에서는 다음과 같이 통신이 진행됩니다."}]
2f:["$","p",null,{"children":["$","img",null,{"src":"/images/2024-07-21/Pasted%20image%2020240722125032.png","alt":""}]}]
30:["$","p",null,{"children":"프론트엔드 서버가 존재하는 Next.js에서는 간단하게 다음과 같이 통신이 진행됩니다."}]
31:["$","p",null,{"children":["$","img",null,{"src":"/images/2024-07-21/Pasted%20image%2020240722124750.png","alt":""}]}]
32:["$","p",null,{"children":"브라우저 > 프론트엔드 서버(node.js 환경) > 백엔드 서버 식이죠. 위처럼 움직이기 때문에 SSR이나 SSG, ISG 등등이 가능하게 된 것입니다."}]
33:["$","p",null,{"children":"서버 컴포넌트는 프론트엔드 \"서버\" 컴포넌트를 말하는데요. 데이터를 분할해서 브라우저로 보낼 수 있는 streaming이 가능한 이유도 이것 때문입니다."}]
34:["$","p",null,{"children":["$","img",null,{"src":"/images/2024-07-21/Pasted%20image%2020240722125217.png","alt":""}]}]
35:["$","p",null,{"children":"Suspense를 이용하면 위 사진처럼 fallback을 먼저 보내고 프론트엔드 서버에서 서버 컴포넌트 렌더링을 끝내면 브라우저에 컴포넌트를 보내고 fallback을 치우는 식이죠."}]
36:["$","p",null,{"children":"이번 작업에서 최근 본 공고에 이를 활용하고자 했는데요. 문제는 서버 컴포넌트 렌더링을 끝내고 Suspense를 받기 위해서는 서버 컴포넌트 내부의 것들이 서버 관련이어야 한다는 것입니다."}]
37:["$","blockquote",null,{"children":["\n",["$","p",null,{"children":"서버 컴포넌트 : 클라이언트 관련된 것들을 사용할 수 없습니다. Web API, document, web storage 등등에 접근할 수 없고 상태,훅등을 사용할 수 없습니다. 대신 db, 내부 서비스, 파일 시스템 등 서버에만 있는 데이터는 async, await으로 접근할 수 있습니다."}],"\n"]}]
38:["$","p",null,{"children":"로컬 스토리지나 세션 스토리지 같은 web storage를 사용해서 최근 본 공고를 구현할 수는 있었으나 web storage라서 서버 컴포넌트 안에서는 쓸 수 없었고 그럼 Suspense를 활용할 수 없게 됩니다."}]
39:["$","p",null,{"children":"이를 위해 찾게 된 것이 Next Cookie였습니다."}]
3a:["$","p",null,{"children":["기존 React에서는 쿠키를 document.cookie를 이용해서 접근이 가능했습니다. (httpOnly가 아닐 경우에만) (",["$","a",null,{"href":"https://ko.javascript.info/cookie","children":"https://ko.javascript.info/cookie"}],")"]}]
3b:["$","p",null,{"children":"쿠키는 통신에 담기기 때문에 다음의 사진대로 움직이게 되죠"}]
3c:["$","p",null,{"children":["$","img",null,{"src":"/images/2024-07-21/Pasted%20image%2020240722125032.png","alt":""}]}]
3d:["$","p",null,{"children":["Next 에서의 쿠키 조작은 프론트엔드 서버에서 가능합니다. ",["$","a",null,{"href":"https://nextjs.org/docs/app/api-reference/functions/cookies","children":"https://nextjs.org/docs/app/api-reference/functions/cookies"}]]}]
3e:["$","p",null,{"children":["$","img",null,{"src":"/images/2024-07-21/Pasted%20image%2020240722130714.png","alt":""}]}]
3f:["$","p",null,{"children":"브라우저와 백엔드 서버 사이에서 쿠키를 CRUD할 수 있고 이는 프론트엔드 서버에서 실행되기에 서버 컴포넌트 안에서도 사용가능한 것이었습니다."}]
40:["$","p",null,{"children":["이를 기반으로 함수를 만들어주고 분기를 나누게 되었습니다.\n",["$","a",null,{"href":"https://nextjs.org/docs/app/api-reference/functions/cookies","children":"https://nextjs.org/docs/app/api-reference/functions/cookies"}]]}]
41:["$","p",null,{"children":"Suspense 사용을 위한 서버 컴포넌트 설계를 위해 쿠키를 활용했다 라는 것을 알아두고 자세한 이야기는 최근 본 공고 설계 부분에서 다루도록 하겠습니다."}]
42:["$","h3",null,{"id":3,"className":"hltr-yellow","children":"Next Cookie까지 오게된 과정 (고민들)"}]
43:["$","p",null,{"children":"사실 처음에는 로그인 상태나 최근 본 공고는 전역 상태 관리로 처리하려고 했습니다."}]
44:["$","p",null,{"children":"전역 상태라는 것은 해당 route에서 고정됩니다. route change가 일어나면 저장이 되지 않습니다."}]
45:["$","p",null,{"children":"zustand에서 persist라는 미들웨어가 존재해서 route change에서도 로컬 스토리지를 활용해 데이터를 저장해 놓았기 때문인데요."}]
46:["$","p",null,{"children":"이를 사용하기 위한 많은 시행 착오가 있었습니다."}]
47:["$","p",null,{"children":"정말 수많은 레퍼런스도 찾아보았고 클라이언트와 서버 둘다 실행되는 zustand를 Next에서 사용하기 위해서 hydrate를 진행하지 않다가 rehydrate를 클라이언트 단에서 하는 등의 방식도 찾게 되었습니다."}]
48:["$","pre",null,{"children":["$","code",null,{"className":"hljs language-tsx","children":[["$","span",null,{"className":"hljs-string","children":"\"use client\""}],";\n\n",["$","span",null,{"className":"hljs-keyword","children":"import"}]," useUserStore ",["$","span",null,{"className":"hljs-keyword","children":"from"}]," ",["$","span",null,{"className":"hljs-string","children":"\"@/stores/create-store\""}],";\n",["$","span",null,{"className":"hljs-keyword","children":"import"}]," { useEffect } ",["$","span",null,{"className":"hljs-keyword","children":"from"}]," ",["$","span",null,{"className":"hljs-string","children":"\"react\""}],";\n\n",["$","span",null,{"className":"hljs-comment","children":"// mount 시 rehydrate를 실행합니다."}],"\n",["$","span",null,{"className":"hljs-keyword","children":"const"}]," ",["$","span",null,{"className":"hljs-title function_","children":"Hydration"}]," = (",["$","span",null,{"className":"hljs-params"}],") => {\n  ",["$","span",null,{"className":"hljs-title function_","children":"useEffect"}],"(",["$","span",null,{"className":"hljs-function","children":"() =>"}]," {\n    useUserStore.",["$","span",null,{"className":"hljs-property","children":"persist"}],".",["$","span",null,{"className":"hljs-title function_","children":"rehydrate"}],"();\n  }, []);\n\n  ",["$","span",null,{"className":"hljs-keyword","children":"return"}]," ",["$","span",null,{"className":"hljs-literal","children":"null"}],";\n};\n\n",["$","span",null,{"className":"hljs-keyword","children":"export"}]," ",["$","span",null,{"className":"hljs-keyword","children":"default"}]," ",["$","span",null,{"className":"hljs-title class_","children":"Hydration"}],";\n"]}]}]
49:["$","p",null,{"children":"소위 온몸 비틀기를 사용한 것인데요."}]
4a:["$","p",null,{"children":"전역 \"상태\" 에 집중해보았습니다. zustand 개발자분은 깃허브 이슈에서 서버에는 \"상태\"가 존재하지 않다는 사실을 알면 이해가 편할꺼라고 이야기를 자주했습니다. 거기에 팀원이 사실 로컬 스토리지가 있는데 전역 상태와의 차이가 없는 것 같다고 말씀 해주셨습니다. 더구나 주스탄드 역시 rehydrate를 클라이언트 단에서 사용하고 로컬 스토리지를 활용하기 때문에 클라이언트 컴포넌트에서밖에 사용할 수 없었죠."}]
4b:["$","p",null,{"children":"저도 선뜻 대답할 수 없었고 \"상태\"라는 것에 집중해보았습니다."}]
4c:["$","p",null,{"children":"지금 저장하고 있는 상태가 한 라우트에서 렌더링의 변화가 이루어져야 하는 것인가? 아니면 전역 데이터로써 한번 가져오고 바꿀 수만 있으면 되는 것인가 에 집중해보았습니다."}]
4d:["$","p",null,{"children":"브라우저에서 관리되어야할 데이터는 \"상태\" 보단 \"공고에 대한 정보, 로그인 여부 같은 단순 데이터\" 라는 사실을 알게 되었고 zustand는 급페이 프로젝트에서 삭제하게 되고 이 과정 속에서 서버에서도 활용이 가능한 Next cookie를 만나게 됩니다."}]
4e:["$","blockquote",null,{"children":["\n",["$","p",null,{"children":"이 문제들을 해결하는 과정에서 기술은 어디까지나 도구 라는 생각을 강하게 갖게 되었습니다. 전역 상태 관리 라는 것의 의미를 많이 고민하고 설계를 진행했더라면 zustand라는 도구를 사용하지 않았을 것입니다."}],"\n"]}]
4f:["$","h1",null,{"id":4,"className":"hltr-red","children":"페이지 구현"}]
50:["$","p",null,{"children":"이제 구현에 대해서 본격적으로 코드와 함께 찾아보겠습니다. 코드를 작성한 이유와 그와 관련된 트러블 이슈를 이야기해보겠습니다."}]
51:["$","h2",null,{"id":5,"className":"hltr-orange","children":"전체 페이지 구조 설계"}]
52:["$","pre",null,{"children":["$","code",null,{"className":"hljs language-tsx","children":[["$","span",null,{"className":"hljs-keyword","children":"export"}]," ",["$","span",null,{"className":"hljs-keyword","children":"default"}]," ",["$","span",null,{"className":"hljs-keyword","children":"async"}]," ",["$","span",null,{"className":"hljs-keyword","children":"function"}]," ",["$","span",null,{"className":"hljs-title function_","children":"page"}],"(",["$","span",null,{"className":"hljs-params","children":["{ params }: ",["$","span",null,{"className":"hljs-title class_","children":"PageProps"}]]}],") {\n  ",["$","span",null,{"className":"hljs-keyword","children":"return"}]," (\n    ",["$","span",null,{"className":"xml","children":[["$","span",null,{"className":"hljs-tag","children":["<",["$","span",null,{"className":"hljs-name","children":"div"}]," ",["$","span",null,{"className":"hljs-attr","children":"className"}],"=",["$","span",null,{"className":"hljs-string","children":"\"base-container\""}],">"]}],"\n      ",["$","span",null,{"className":"hljs-tag","children":["<",["$","span",null,{"className":"hljs-name","children":"Suspense"}]," ",["$","span",null,{"className":"hljs-attr","children":"fallback"}],"=",["$","span",null,{"className":"hljs-string","children":"{"}],"<",["$","span",null,{"className":"hljs-attr","children":"NoticeDetailCardSkeleton"}]," />"]}],"}>\n        ",["$","span",null,{"className":"hljs-tag","children":["<",["$","span",null,{"className":"hljs-name","children":"NoticeDetailCard"}]," ",["$","span",null,{"className":"hljs-attr","children":"shopId"}],"=",["$","span",null,{"className":"hljs-string","children":"{params.shop_id}"}]," ",["$","span",null,{"className":"hljs-attr","children":"noticeId"}],"=",["$","span",null,{"className":"hljs-string","children":"{params.notice_id}"}]," />"]}],"\n      ",["$","span",null,{"className":"hljs-tag","children":["</",["$","span",null,{"className":"hljs-name","children":"Suspense"}],">"]}],"\n      ",["$","span",null,{"className":"hljs-tag","children":["<",["$","span",null,{"className":"hljs-name","children":"div"}]," ",["$","span",null,{"className":"hljs-attr","children":"className"}],"=",["$","span",null,{"className":"hljs-string","children":"\"my-12\""}],">"]}],"\n        ",["$","span",null,{"className":"hljs-tag","children":["<",["$","span",null,{"className":"hljs-name","children":"h2"}]," ",["$","span",null,{"className":"hljs-attr","children":"className"}],"=",["$","span",null,{"className":"hljs-string","children":"\"text-l py-8 font-bold md:text-2xl\""}],">"]}],"최근에 본 공고",["$","span",null,{"className":"hljs-tag","children":["</",["$","span",null,{"className":"hljs-name","children":"h2"}],">"]}],"\n        ",["$","span",null,{"className":"hljs-tag","children":["<",["$","span",null,{"className":"hljs-name","children":"div"}]," ",["$","span",null,{"className":"hljs-attr","children":"className"}],"=",["$","span",null,{"className":"hljs-string","children":"\"grid grid-cols-2 gap-4 lg:grid-cols-3\""}],">"]}],"\n          ",["$","span",null,{"className":"hljs-tag","children":["<",["$","span",null,{"className":"hljs-name","children":"Suspense"}],"\n            ",["$","span",null,{"className":"hljs-attr","children":"fallback"}],"=",["$","span",null,{"className":"hljs-string","children":"{[1,"}]," ",["$","span",null,{"className":"hljs-attr","children":"2"}],", ",["$","span",null,{"className":"hljs-attr","children":"3"}],", ",["$","span",null,{"className":"hljs-attr","children":"4"}],", ",["$","span",null,{"className":"hljs-attr","children":"5"}],", ",["$","span",null,{"className":"hljs-attr","children":"6"}],"]",["$","span",null,{"className":"hljs-attr","children":".map"}],"((",["$","span",null,{"className":"hljs-attr","children":"value"}],") =>"]}]," (\n              ",["$","span",null,{"className":"hljs-tag","children":["<",["$","span",null,{"className":"hljs-name","children":"NoticeCardSkeleton"}]," ",["$","span",null,{"className":"hljs-attr","children":"key"}],"=",["$","span",null,{"className":"hljs-string","children":"{value}"}]," />"]}],"\n            ))}\n          >\n            ",["$","span",null,{"className":"hljs-tag","children":["<",["$","span",null,{"className":"hljs-name","children":"RecentNotices"}],"\n              ",["$","span",null,{"className":"hljs-attr","children":"shopId"}],"=",["$","span",null,{"className":"hljs-string","children":"{params.shop_id}"}],"\n              ",["$","span",null,{"className":"hljs-attr","children":"noticeId"}],"=",["$","span",null,{"className":"hljs-string","children":"{params.notice_id}"}],"\n            />"]}],"\n          ",["$","span",null,{"className":"hljs-tag","children":["</",["$","span",null,{"className":"hljs-name","children":"Suspense"}],">"]}],"\n        ",["$","span",null,{"className":"hljs-tag","children":["</",["$","span",null,{"className":"hljs-name","children":"div"}],">"]}],"\n      ","$L85","\n    ","$L86"]}],"\n  );\n}\n"]}]}]
53:["$","p",null,{"children":"페이지 전체 구조입니다."}]
54:["$","p",null,{"children":"메인 카드와 최근 본 공고의 스켈레톤을 제작하고 이를 Suspense의 fallback으로 만듬으로써 서버 컴포넌트들이 렌더링 되기 전에 스켈레톤을 볼 수 있도록 하였습니다. ui 컴포넌트에 가까우니 빠르게 넘어가겠습니다."}]
55:["$","h2",null,{"id":6,"className":"hltr-orange","children":"메인 카드 설계"}]
56:["$","pre",null,{"children":["$","code",null,{"className":"hljs language-tsx","children":[["$","span",null,{"className":"hljs-keyword","children":"export"}]," ",["$","span",null,{"className":"hljs-keyword","children":"default"}]," ",["$","span",null,{"className":"hljs-keyword","children":"async"}]," ",["$","span",null,{"className":"hljs-keyword","children":"function"}]," ",["$","span",null,{"className":"hljs-title function_","children":"NoticeDetailCard"}],"(",["$","span",null,{"className":"hljs-params","children":["{\n  shopId,\n  noticeId,\n}: ",["$","span",null,{"className":"hljs-title class_","children":"NoticeDetailCardProps"}]]}],") {\n  ",["$","span",null,{"className":"hljs-keyword","children":"const"}]," noticeDetail = ",["$","span",null,{"className":"hljs-keyword","children":"await"}]," ",["$","span",null,{"className":"hljs-title function_","children":"getShopNoticeDetail"}],"(shopId, noticeId);\n  ",["$","span",null,{"className":"hljs-keyword","children":"const"}]," ",["$","span",null,{"className":"hljs-keyword","children":"type"}]," = ",["$","span",null,{"className":"hljs-keyword","children":"await"}]," ",["$","span",null,{"className":"hljs-title function_","children":"getCookie"}],"(",["$","span",null,{"className":"hljs-string","children":"\"type\""}],");\n  ",["$","span",null,{"className":"hljs-keyword","children":"const"}]," address = ",["$","span",null,{"className":"hljs-keyword","children":"await"}]," ",["$","span",null,{"className":"hljs-title function_","children":"getCookie"}],"(",["$","span",null,{"className":"hljs-string","children":"\"address\""}],");\n  ",["$","span",null,{"className":"hljs-keyword","children":"const"}]," userId = ",["$","span",null,{"className":"hljs-keyword","children":"await"}]," ",["$","span",null,{"className":"hljs-title function_","children":"getCookie"}],"(",["$","span",null,{"className":"hljs-string","children":"\"userId\""}],");\n\n  ",["$","span",null,{"className":"hljs-keyword","children":"const"}]," hourlyWage = ",["$","span",null,{"className":"hljs-title function_","children":"calculateWagePercentage"}],"(noticeDetail.",["$","span",null,{"className":"hljs-property","children":"item"}],".",["$","span",null,{"className":"hljs-property","children":"hourlyPay"}],");\n  ",["$","span",null,{"className":"hljs-keyword","children":"const"}]," date = ",["$","span",null,{"className":"hljs-title function_","children":"dateFormat"}],"(noticeDetail.",["$","span",null,{"className":"hljs-property","children":"item"}],".",["$","span",null,{"className":"hljs-property","children":"startsAt"}],");\n  ",["$","span",null,{"className":"hljs-keyword","children":"const"}]," ",["$","span",null,{"className":"hljs-attr","children":"isLater"}],": ",["$","span",null,{"className":"hljs-built_in","children":"boolean"}]," = ",["$","span",null,{"className":"hljs-title function_","children":"compareWorkingDateDiffFromNow"}],"(\n    noticeDetail.",["$","span",null,{"className":"hljs-property","children":"item"}],".",["$","span",null,{"className":"hljs-property","children":"startsAt"}],",\n    noticeDetail.",["$","span",null,{"className":"hljs-property","children":"item"}],".",["$","span",null,{"className":"hljs-property","children":"workhour"}],",\n  );\n  ",["$","span",null,{"className":"hljs-keyword","children":"const"}]," userApplication =\n    ",["$","span",null,{"className":"hljs-keyword","children":"typeof"}]," userId === ",["$","span",null,{"className":"hljs-string","children":"\"string\""}]," && ",["$","span",null,{"className":"hljs-keyword","children":"type"}]," === ",["$","span",null,{"className":"hljs-string","children":"\"employee\""}],"\n      ? ",["$","span",null,{"className":"hljs-keyword","children":"await"}]," ",["$","span",null,{"className":"hljs-title function_","children":"getUsersUserIdApplications"}],"(userId)\n      : ",["$","span",null,{"className":"hljs-literal","children":"null"}],";\n",["$","span",null,{"className":"hljs-comment","children":"//..."}],"\n"]}]}]
57:["$","p",null,{"children":"shopId와 noticeId를 param에서 꺼내며 사용되는 NoticeDetailCard 입니다. 쿠키를 활용해서 사용자의 정보를 받아 올 수 있으며 이를 통해 렌더링을 진행했습니다."}]
58:["$","p",null,{"children":"이 정보를 통해서 서버 컴포넌트를 만들 때부터 신청하기 버튼의 분기 처리가 가능합니다."}]
59:["$","pre",null,{"children":["$","code",null,{"className":"hljs language-tsx","children":[["$","span",null,{"className":"hljs-string","children":"\"use client\""}],"\n",["$","span",null,{"className":"hljs-comment","children":"//..."}],"\n",["$","span",null,{"className":"hljs-keyword","children":"export"}]," ",["$","span",null,{"className":"hljs-keyword","children":"default"}]," ",["$","span",null,{"className":"hljs-keyword","children":"function"}]," ",["$","span",null,{"className":"hljs-title function_","children":"RegisterButton"}],"(",["$","span",null,{"className":"hljs-params","children":["{\n  address,\n  userApplication,\n  shopId,\n  noticeId,\n}: ",["$","span",null,{"className":"hljs-title class_","children":"RegisterButtonProps"}]]}],") {\n  ",["$","span",null,{"className":"hljs-keyword","children":"if"}]," (userApplication === ",["$","span",null,{"className":"hljs-literal","children":"null"}],") {\n    ",["$","span",null,{"className":"hljs-keyword","children":"return"}]," (\n      ",["$","span",null,{"className":"xml","children":[["$","span",null,{"className":"hljs-tag","children":["<",["$","span",null,{"className":"hljs-name","children":"LinkButton"}]," ",["$","span",null,{"className":"hljs-attr","children":"className"}],"=",["$","span",null,{"className":"hljs-string","children":"\"\""}]," ",["$","span",null,{"className":"hljs-attr","children":"href"}],"=",["$","span",null,{"className":"hljs-string","children":"{"}],"\"/",["$","span",null,{"className":"hljs-attr","children":"login"}],"\"}>"]}],"\n        신청하기\n      ",["$","span",null,{"className":"hljs-tag","children":["</",["$","span",null,{"className":"hljs-name","children":"LinkButton"}],">"]}]]}],"\n    );\n  }\n\n  ",["$","span",null,{"className":"hljs-keyword","children":"const"}]," isRegister = userApplication.",["$","span",null,{"className":"hljs-property","children":"items"}],".",["$","span",null,{"className":"hljs-title function_","children":"some"}],"(",["$","span",null,{"className":"hljs-function","children":["(",["$","span",null,{"className":"hljs-params","children":"obj"}],") =>"]}]," {\n    ",["$","span",null,{"className":"hljs-keyword","children":"return"}]," (\n      obj.",["$","span",null,{"className":"hljs-property","children":"item"}],".",["$","span",null,{"className":"hljs-property","children":"notice"}],".",["$","span",null,{"className":"hljs-property","children":"item"}],".",["$","span",null,{"className":"hljs-property","children":"id"}]," === noticeId && obj.",["$","span",null,{"className":"hljs-property","children":"item"}],".",["$","span",null,{"className":"hljs-property","children":"status"}]," === ",["$","span",null,{"className":"hljs-string","children":"\"pending\""}],"\n    );\n  });\n\n  ",["$","span",null,{"className":"hljs-keyword","children":"const"}]," isRejected = userApplication.",["$","span",null,{"className":"hljs-property","children":"items"}],".",["$","span",null,{"className":"hljs-title function_","children":"some"}],"(",["$","span",null,{"className":"hljs-function","children":["(",["$","span",null,{"className":"hljs-params","children":"obj"}],") =>"]}]," {\n    ",["$","span",null,{"className":"hljs-keyword","children":"return"}]," (\n      obj.",["$","span",null,{"className":"hljs-property","children":"item"}],".",["$","span",null,{"className":"hljs-property","children":"notice"}],".",["$","span",null,{"className":"hljs-property","children":"item"}],".",["$","span",null,{"className":"hljs-property","children":"id"}]," === noticeId && obj.",["$","span",null,{"className":"hljs-property","children":"item"}],".",["$","span",null,{"className":"hljs-property","children":"status"}]," === ",["$","span",null,{"className":"hljs-string","children":"\"rejected\""}],"\n    );\n  });\n  ",["$","span",null,{"className":"hljs-comment","children":"//..."}],"\n"]}]}]
5a:["$","p",null,{"children":"위처럼 쿠키가 활용된 데이터를 props으로 내려줌으로써 클라이언트 컴포넌트인 신청하기 버튼이 모달 기능, Link 등등 다양한 기능 확장을 가질 수 있게 되었습니다."}]
5b:["$","h2",null,{"id":7,"className":"hltr-orange","children":"최근 본 공고 설계"}]
5c:["$","p",null,{"children":"이번 글 쓰기의 목적이자 제일 공을 많이 들였던 파트입니다."}]
5d:["$","p",null,{"children":["우선 공고를 저장하는 로직은 ",["$","code",null,{"children":"큐"}]," 자료구조여야 합니다. 저장하는 함수에서 이를 갖고 있다면 사용하는 사람은 인수를 보내기만 하면 되겠죠. cookie와 관련되어 있기에 구체적인 구현은 숨기고 드러나는 부분은 함수 하나로 클린하게 만들기 위해 노력했습니다."]}]
5e:["$","pre",null,{"children":["$","code",null,{"className":"hljs language-tsx","children":[["$","span",null,{"className":"hljs-string","children":"\"use server\""}],";\n",["$","span",null,{"className":"hljs-comment","children":"//..."}],"\n",["$","span",null,{"className":"hljs-comment","children":"// notice를 가져옵니다."}],"\n",["$","span",null,{"className":"hljs-keyword","children":"export"}]," ",["$","span",null,{"className":"hljs-keyword","children":"const"}]," getNotices = ",["$","span",null,{"className":"hljs-title function_","children":"async"}]," (): ",["$","span",null,{"className":"hljs-title class_","children":"Promise"}],"<",["$","span",null,{"className":"hljs-title class_","children":"NoticeIds"}],"[]> => {\n  ",["$","span",null,{"className":"hljs-keyword","children":"const"}]," ",["$","span",null,{"className":"hljs-attr","children":"currentNotice"}],": ",["$","span",null,{"className":"hljs-title class_","children":"NoticeIds"}],"[] = ",["$","span",null,{"className":"hljs-title class_","children":"JSON"}],".",["$","span",null,{"className":"hljs-title function_","children":"parse"}],"(\n    (",["$","span",null,{"className":"hljs-keyword","children":"await"}]," ",["$","span",null,{"className":"hljs-title function_","children":"getCookie"}],"(",["$","span",null,{"className":"hljs-string","children":"\"notices\""}],")) || ",["$","span",null,{"className":"hljs-string","children":"\"[]\""}],",\n  );\n  ",["$","span",null,{"className":"hljs-keyword","children":"return"}]," currentNotice;\n};\n\n",["$","span",null,{"className":"hljs-comment","children":"// notice를 파싱해주는 내부 함수"}],"\n",["$","span",null,{"className":"hljs-keyword","children":"const"}]," setNotices = ",["$","span",null,{"className":"hljs-title function_","children":"async"}]," (",["$","span",null,{"className":"hljs-attr","children":"noticesIdList"}],": ",["$","span",null,{"className":"hljs-title class_","children":"NoticeIds"}],"[]): ",["$","span",null,{"className":"hljs-title class_","children":"Promise"}],"<",["$","span",null,{"className":"hljs-built_in","children":"void"}],"> => {\n  ",["$","span",null,{"className":"hljs-keyword","children":"await"}]," ",["$","span",null,{"className":"hljs-title function_","children":"setCookie"}],"(",["$","span",null,{"className":"hljs-string","children":"\"notices\""}],", ",["$","span",null,{"className":"hljs-title class_","children":"JSON"}],".",["$","span",null,{"className":"hljs-title function_","children":"stringify"}],"(noticesIdList));\n};\n\n",["$","span",null,{"className":"hljs-comment","children":"// notice를 큐 자료구조를 활용하여 저장하는 로직"}],"\n",["$","span",null,{"className":"hljs-keyword","children":"export"}]," ",["$","span",null,{"className":"hljs-keyword","children":"async"}]," ",["$","span",null,{"className":"hljs-keyword","children":"function"}]," ",["$","span",null,{"className":"hljs-title function_","children":"postNotice"}],"(",["$","span",null,{"className":"hljs-params","children":["\n  ",["$","span",null,{"className":"hljs-attr","children":"notice"}],": ",["$","span",null,{"className":"hljs-title class_","children":"GetNotices"}],"[",["$","span",null,{"className":"hljs-string","children":"\"items\""}],"][",["$","span",null,{"className":"hljs-number","children":"0"}],"][",["$","span",null,{"className":"hljs-string","children":"\"item\""}],"],\n"]}],"): ",["$","span",null,{"className":"hljs-title class_","children":"Promise"}],"<",["$","span",null,{"className":"hljs-built_in","children":"void"}],"> {\n  ",["$","span",null,{"className":"hljs-keyword","children":"const"}]," ",["$","span",null,{"className":"hljs-attr","children":"currentNotice"}],": ",["$","span",null,{"className":"hljs-title class_","children":"NoticeIds"}],"[] = ",["$","span",null,{"className":"hljs-keyword","children":"await"}]," ",["$","span",null,{"className":"hljs-title function_","children":"getNotices"}],"();\n  ",["$","span",null,{"className":"hljs-keyword","children":"const"}]," newNoticeId = { ",["$","span",null,{"className":"hljs-attr","children":"id"}],": notice.",["$","span",null,{"className":"hljs-property","children":"id"}],", ",["$","span",null,{"className":"hljs-attr","children":"shopId"}],": notice.",["$","span",null,{"className":"hljs-property","children":"shop"}],".",["$","span",null,{"className":"hljs-property","children":"item"}],".",["$","span",null,{"className":"hljs-property","children":"id"}]," };\n\n  ",["$","span",null,{"className":"hljs-comment","children":"// 중복 확인"}],"\n  ",["$","span",null,{"className":"hljs-keyword","children":"const"}]," isDuplicated = currentNotice.",["$","span",null,{"className":"hljs-title function_","children":"some"}],"(","$L87"," n.","$L88"," === notice.","$L89",");\n  ","$L8a"," (isDuplicated) {\n    ","$L8b"," ","$L8c","([\n      newNoticeId,\n      ...currentNotice.","$L8d","(","$L8e"," n.","$L8f"," !== notice.","$L90","),\n    ]);\n  } ","$L91"," ","$L92"," (currentNotice.","$L93"," >= ","$L94",") {\n    ","$L95"," ","$L96","([newNoticeId, ...currentNotice.","$L97","(","$L98",", ","$L99",")]);\n  } ","$L9a"," {\n    ","$L9b"," ","$L9c","([newNoticeId, ...currentNotice]);\n  }\n}\n"]}]}]
5f:["$","p",null,{"children":"데이터를 저장하는 로직을 위처럼 구성해놓아 notice를 가져올 때는 getNotices() 저장할때는 postNotice(데이터) 형식으로 단순화시켰습니다."}]
60:["$","p",null,{"children":"자동으로 중복처리, 데이터 관리를 해주기에 추후 작업이 빨라지게 되었습니다."}]
61:["$","pre",null,{"children":["$","code",null,{"className":"hljs language-tsx","children":[["$","span",null,{"className":"hljs-keyword","children":"export"}]," ",["$","span",null,{"className":"hljs-keyword","children":"default"}]," ",["$","span",null,{"className":"hljs-keyword","children":"async"}]," ",["$","span",null,{"className":"hljs-keyword","children":"function"}]," ",["$","span",null,{"className":"hljs-title function_","children":"RecentNotices"}],"(",["$","span",null,{"className":"hljs-params","children":["{\n  shopId,\n  noticeId,\n}: ",["$","span",null,{"className":"hljs-title class_","children":"ReCentNoticesProps"}]]}],") {\n  ",["$","span",null,{"className":"hljs-keyword","children":"const"}]," notices = ",["$","span",null,{"className":"hljs-keyword","children":"await"}]," ",["$","span",null,{"className":"hljs-title function_","children":"getNotices"}],"();\n  ",["$","span",null,{"className":"hljs-keyword","children":"return"}]," (\n    ",["$","span",null,{"className":"xml","children":[["$","span",null,{"className":"hljs-tag","children":"<>"}],"\n      ",["$","span",null,{"className":"hljs-tag","children":["<",["$","span",null,{"className":"hljs-name","children":"PostNoticesEffect"}]," ",["$","span",null,{"className":"hljs-attr","children":"shopId"}],"=",["$","span",null,{"className":"hljs-string","children":"{shopId}"}]," ",["$","span",null,{"className":"hljs-attr","children":"noticeId"}],"=",["$","span",null,{"className":"hljs-string","children":"{noticeId}"}]," />"]}],"\n      {notices &&\n        notices.length > 1 &&\n        notices.map(async (notice) => {\n          if (notice.id === noticeId) return null; // early return\n          const cardContents = await fetchNotices(notice);\n          return (\n            ",["$","span",null,{"className":"hljs-tag","children":["<",["$","span",null,{"className":"hljs-name","children":"LinkButton"}],"\n              ",["$","span",null,{"className":"hljs-attr","children":"noticeId"}],"=",["$","span",null,{"className":"hljs-string","children":"{cardContents.id}"}],"\n              ",["$","span",null,{"className":"hljs-attr","children":"shopId"}],"=",["$","span",null,{"className":"hljs-string","children":"{cardContents.shop.item.id}"}],"\n              ",["$","span",null,{"className":"hljs-attr","children":"key"}],"=",["$","span",null,{"className":"hljs-string","children":"{cardContents.id}"}],"\n            >"]}],"\n              ",["$","span",null,{"className":"hljs-tag","children":["<",["$","span",null,{"className":"hljs-name","children":"NoticeCard"}],"\n                ",["$","span",null,{"className":"hljs-attr","children":"address1"}],"=",["$","span",null,{"className":"hljs-string","children":"{cardContents.shop.item.address1}"}],"\n                ",["$","span",null,{"className":"hljs-attr","children":"closed"}],"=",["$","span",null,{"className":"hljs-string","children":"{cardContents.closed}"}],"\n                ",["$","span",null,{"className":"hljs-attr","children":"hourlyPay"}],"=",["$","span",null,{"className":"hljs-string","children":"{cardContents.hourlyPay}"}],"\n                ",["$","span",null,{"className":"hljs-attr","children":"noticeId"}],"=",["$","span",null,{"className":"hljs-string","children":"{cardContents.id}"}],"\n                ",["$","span",null,{"className":"hljs-attr","children":"imageUrl"}],"=",["$","span",null,{"className":"hljs-string","children":"{cardContents.shop.item.imageUrl}"}],"\n                ",["$","span",null,{"className":"hljs-attr","children":"name"}],"=",["$","span",null,{"className":"hljs-string","children":"{cardContents.shop.item.name}"}],"\n                ",["$","span",null,{"className":"hljs-attr","children":"startsAt"}],"=",["$","span",null,{"className":"hljs-string","children":"{cardContents.startsAt}"}],"\n                ",["$","span",null,{"className":"hljs-attr","children":"workhour"}],"=",["$","span",null,{"className":"hljs-string","children":"{cardContents.workhour}"}],"\n              />"]}],"\n            ",["$","span",null,{"className":"hljs-tag","children":["</",["$","span",null,{"className":"hljs-name","children":"LinkButton"}],">"]}],"\n          );\n        })}\n    ",["$","span",null,{"className":"hljs-tag","children":"</>"}]]}],"\n  );\n}\n"]}]}]
62:["$","p",null,{"children":"보시면 PostNoticeEffect 라는 부분이 있는데요. 이는 UseEffect로 데이터를 저장해주기 위함입니다."}]
63:["$","p",null,{"children":"이렇게 사용하는 이유는 다음의 과정으로 렌더링이 진행되기 때문입니다."}]
64:["$","ol",null,{"children":["\n",["$","li",null,{"children":"페이지에 진입한다."}],"\n",["$","li",null,{"children":"최근 본 공고가 렌더링된다."}],"\n",["$","li",null,{"children":"진입이 되었기에 쿠키에서 현재 보는 공고도 추가시킨다."}],"\n",["$","li",null,{"children":"쿠키 변경으로 인해서 최근 본 공고가 리렌더링 (변경 된다.)"}],"\n"]}]
65:["$","p",null,{"children":"이는 서버 컴포넌트 렌더링 이후에 한번 더 데이터가 바뀌는 모습을 보여주게 되었고 이를 문제로 여겼습니다."}]
66:["$","pre",null,{"children":["$","code",null,{"className":"hljs language-tsx","children":[["$","span",null,{"className":"hljs-keyword","children":"export"}]," ",["$","span",null,{"className":"hljs-keyword","children":"function"}]," ",["$","span",null,{"className":"hljs-title function_","children":"PostNoticesEffect"}],"(",["$","span",null,{"className":"hljs-params","children":["{\n  shopId,\n  noticeId,\n}: {\n  shopId: ",["$","span",null,{"className":"hljs-built_in","children":"string"}],";\n  noticeId: ",["$","span",null,{"className":"hljs-built_in","children":"string"}],";\n}"]}],") {\n  ",["$","span",null,{"className":"hljs-title function_","children":"useEffect"}],"(",["$","span",null,{"className":"hljs-function","children":"() =>"}]," {\n    ",["$","span",null,{"className":"hljs-keyword","children":"const"}]," ",["$","span",null,{"className":"hljs-title function_","children":"fetchData"}]," = ",["$","span",null,{"className":"hljs-keyword","children":"async"}]," (",["$","span",null,{"className":"hljs-params"}],") => {\n      ",["$","span",null,{"className":"hljs-keyword","children":"const"}]," data = ",["$","span",null,{"className":"hljs-keyword","children":"await"}]," ",["$","span",null,{"className":"hljs-title function_","children":"getShopNoticeDetail"}],"(shopId, noticeId);\n      ",["$","span",null,{"className":"hljs-keyword","children":"await"}]," ",["$","span",null,{"className":"hljs-title function_","children":"postNotice"}],"(data.",["$","span",null,{"className":"hljs-property","children":"item"}],");\n    };\n    ",["$","span",null,{"className":"hljs-title function_","children":"fetchData"}],"();\n  }, []);\n  ",["$","span",null,{"className":"hljs-keyword","children":"return"}]," ",["$","span",null,{"className":"xml","children":[["$","span",null,{"className":"hljs-tag","children":"<>"}],["$","span",null,{"className":"hljs-tag","children":"</>"}]]}],";\n}\n"]}]}]
67:["$","p",null,{"children":"위의 코드를 삽입해서 클라이언트 렌더링 시에 postNotice를 실행시켜서 데이터를 쿠키에 담게 하였고 쿠키가 바뀌게 되면서 발생하는 리렌더링 시"}]
68:["$","pre",null,{"children":["$","code",null,{"className":"hljs language-tsx","children":[["$","span",null,{"className":"hljs-keyword","children":"if"}]," (notice.",["$","span",null,{"className":"hljs-property","children":"id"}]," === noticeId) ",["$","span",null,{"className":"hljs-keyword","children":"return"}]," ",["$","span",null,{"className":"hljs-literal","children":"null"}],"; ",["$","span",null,{"className":"hljs-comment","children":"// early return"}],"\n"]}]}]
69:["$","p",null,{"children":"early return으로 현재 보는 공고는 차단하여 사용자는 렌더링된 것을 느끼지 못하게 하였습니다."}]
6a:["$","p",null,{"children":"이로써 서버 컴포넌트이기에 굉장히 빠르게 렌더링 되면서 suspense로 인한 스켈레톤 표현까지 할 수 있게 되었습니다."}]
6b:["$","div",null,{"children":["$","iframe",null,{"title":"vimeo-988246692","src":"https://player.vimeo.com/video/988246692","width":"640","height":"360","allow":"autoplay; fullscreen","allowFullScreen":true}]}]
6c:["$","h3",null,{"id":8,"className":"hltr-yellow","children":"트러블 슈팅"}]
6d:["$","h4",null,{"id":9,"className":"hltr-green","children":"핸들러에 비동기 함수를 넣어선 안된다."}]
6e:["$","p",null,{"children":"공고 카드를 광클하면 멈추는 오류를 발견했습니다."}]
6f:["$","pre",null,{"children":["$","code",null,{"className":"hljs language-tsx","children":[["$","span",null,{"className":"hljs-comment","children":"//..."}],"\n",["$","span",null,{"className":"hljs-keyword","children":"export"}]," ",["$","span",null,{"className":"hljs-keyword","children":"default"}]," ",["$","span",null,{"className":"hljs-keyword","children":"function"}]," ",["$","span",null,{"className":"hljs-title function_","children":"NoticeCard"}],"(",["$","span",null,{"className":"hljs-params","children":["{\n  hourlyPay,\n  startsAt,\n  workhour,\n  noticeId,\n  shopId,\n  imageUrl,\n  name,\n  address1,\n  content,\n  closed,\n}: ",["$","span",null,{"className":"hljs-title class_","children":"NoticeCardProps"}]]}],") {\n  ",["$","span",null,{"className":"hljs-keyword","children":"const"}]," hourlyWage = ",["$","span",null,{"className":"hljs-title function_","children":"calculateWagePercentage"}],"(hourlyPay);\n  ",["$","span",null,{"className":"hljs-keyword","children":"const"}]," date = ",["$","span",null,{"className":"hljs-title function_","children":"dateFormat"}],"(startsAt);\n  ",["$","span",null,{"className":"hljs-keyword","children":"const"}]," ",["$","span",null,{"className":"hljs-attr","children":"isLater"}],": ",["$","span",null,{"className":"hljs-built_in","children":"boolean"}]," = ",["$","span",null,{"className":"hljs-title function_","children":"compareWorkingDateDiffFromNow"}],"(startsAt, workhour);\n  ",["$","span",null,{"className":"hljs-keyword","children":"const"}]," ",["$","span",null,{"className":"hljs-title function_","children":"handleClick"}]," = ",["$","span",null,{"className":"hljs-keyword","children":"async"}]," (",["$","span",null,{"className":"hljs-params"}],") => {\n    ",["$","span",null,{"className":"hljs-keyword","children":"if"}]," (content) {\n      ",["$","span",null,{"className":"hljs-keyword","children":"await"}]," ",["$","span",null,{"className":"hljs-title function_","children":"postNoticeAction"}],"(content);\n    } ",["$","span",null,{"className":"hljs-keyword","children":"else"}]," {\n      ",["$","span",null,{"className":"hljs-keyword","children":"await"}]," ",["$","span",null,{"className":"hljs-title function_","children":"redirectAction"}],"(",["$","span",null,{"className":"hljs-string","children":["`/admin/notice-detail/",["$","span",null,{"className":"hljs-subst","children":"$${shopId}"}],"/",["$","span",null,{"className":"hljs-subst","children":"$${noticeId}"}],"`"]}],");\n    }\n  };\n",["$","span",null,{"className":"hljs-comment","children":"//..."}],"\n"]}]}]
70:["$","p",null,{"children":"content로 분기처리를 해서 이벤트를 전달하는데 여기서 문제가 발생한 줄 알았으나"}]
71:["$","p",null,{"children":"현재 post의 경우 cookie로 관리되고 있는데 이 cookie를 set하는 함수가 버튼의 이벤트 핸들러에 있어서 setter함수를 비동기적으로 계속 누르면"}]
72:["$","p",null,{"children":"서버에 과부하가 걸려서 페이지가 멈추게 되었던 것입니다."}]
73:["$","p",null,{"children":"이벤트 핸들러 광클 > cookie를 저장하는 비동기 함수 계속 실행 > 특정 시점에 content가 없어지는 현상 > redirectAction() 함수로 인해 middleware에서 처리(content가 없으면 사장님 페이지로 이동되지만 사장님이 아니기에 list page로 강제 이동)"}]
74:["$","h5",null,{"id":10,"className":"hltr-cyan","children":"해결 방법"}]
75:["$","p",null,{"children":"간단하게 페이지에 접근하면서 저장하는 방식으로 변경했습니다. 짧게 보이긴 하지만 그 알아내는 과정이 조금 고통스러웠어요. 코드를 잘 작성하는 것에 대해 더 고민을 해야되겠다고 생각했습니다."}]
76:["$","h4",null,{"id":11,"className":"hltr-green","children":"쿠키에 저장하는 건 한계가 있다."}]
77:["$","p",null,{"children":"현재는 공고 카드의 id를 저장하고 있지만 기존에는 공고 데이터 자체를 쿠키에 넣는 식으로 사용했었습니다."}]
78:["$","p",null,{"children":"하지만 도중 객체가 3개 이상 저장되지 않는 문제가 있었고 쿠키 만능 주의로 개발하던 저는 쿠키의 데이터가 4MB까지 였다는 사실을 기억해내게 됩니다."}]
79:["$","p",null,{"children":["$","img",null,{"src":"/images/2024-07-21/Pasted%20image%2020240701225259.png","alt":""}]}]
7a:["$","p",null,{"children":"cookie size가 3327 정도가 객체 3개가 담겨있을 때였고 확인을 하니 단위는 Byte 즉 4096Byte 까지가 용량인 쿠키가 더 받아들일 수 없었던 것입니다."}]
7b:["$","h5",null,{"id":12,"className":"hltr-cyan","children":"해결 방법"}]
7c:["$","p",null,{"children":"고민을 하다가 id를 저장해놓고 꺼내오는 쪽에서 해당 id를 활용하여 최신 데이터를 받아오는 로직으로 변경해서 문제를 해결하였습니다."}]
7d:["$","pre",null,{"children":["$","code",null,{"className":"hljs language-tsx","children":[["$","span",null,{"className":"hljs-comment","children":"//..."}],"\n notices.",["$","span",null,{"className":"hljs-property","children":"length"}]," > ",["$","span",null,{"className":"hljs-number","children":"1"}]," &&\n        notices.",["$","span",null,{"className":"hljs-title function_","children":"slice"}],"(",["$","span",null,{"className":"hljs-number","children":"1"}],").",["$","span",null,{"className":"hljs-title function_","children":"map"}],"(",["$","span",null,{"className":"hljs-title function_","children":"async"}]," (notice, ",["$","span",null,{"className":"hljs-attr","children":"index"}],": ",["$","span",null,{"className":"hljs-built_in","children":"number"}],") => {\n          ",["$","span",null,{"className":"hljs-keyword","children":"const"}]," newCardContents = ",["$","span",null,{"className":"hljs-keyword","children":"await"}]," ",["$","span",null,{"className":"hljs-title function_","children":"fetchNotices"}],"(notice);\n",["$","span",null,{"className":"hljs-comment","children":"//..."}],"\n"]}]}]
7e:["$","p",null,{"children":"이제 id만 쿠키에 저장하기 때문에 통신에 들여지는 데이터 양을 줄일 수 있었고 필요한 데이터들을 알맞게 저장할 수 있었습니다."}]
7f:["$","p",null,{"children":"전체 코드에서 볼 수 있었던 이 부분은 이 문제를 해결하기 위해 작성된 코드입니다."}]
80:["$","h1",null,{"id":13,"className":"hltr-red","children":"reference"}]
81:["$","p",null,{"children":["$","a",null,{"href":"https://nextjs.org/docs/app/building-your-application/routing/loading-ui-and-streaming","children":"https://nextjs.org/docs/app/building-your-application/routing/loading-ui-and-streaming"}]}]
82:["$","p",null,{"children":["$","a",null,{"href":"https://nextjs.org/docs/app/api-reference/functions/cookies","children":"https://nextjs.org/docs/app/api-reference/functions/cookies"}]}]
83:["$","p",null,{"children":["$","a",null,{"href":"https://ko.javascript.info/cookie","children":"https://ko.javascript.info/cookie"}]}]
84:["$","blockquote",null,{"children":["\n",["$","p",null,{"children":"급페이 프로젝트 중 고민했던 방식, 부딪히게 된 문제, 그것의 해결과정을 담은 글입니다!"}],"\n",["$","p",null,{"children":"잘못된 내용이 있다면 말씀 부탁드립니다. 감사합니다."}],"\n"]}]
85:["$","span",null,{"className":"hljs-tag","children":["</",["$","span",null,{"className":"hljs-name","children":"div"}],">"]}]
86:["$","span",null,{"className":"hljs-tag","children":["</",["$","span",null,{"className":"hljs-name","children":"div"}],">"]}]
87:["$","span",null,{"className":"hljs-function","children":["(",["$","span",null,{"className":"hljs-params","children":"n"}],") =>"]}]
88:["$","span",null,{"className":"hljs-property","children":"id"}]
89:["$","span",null,{"className":"hljs-property","children":"id"}]
8a:["$","span",null,{"className":"hljs-keyword","children":"if"}]
8b:["$","span",null,{"className":"hljs-keyword","children":"await"}]
8c:["$","span",null,{"className":"hljs-title function_","children":"setNotices"}]
8d:["$","span",null,{"className":"hljs-title function_","children":"filter"}]
8e:["$","span",null,{"className":"hljs-function","children":["(",["$","span",null,{"className":"hljs-params","children":"n"}],") =>"]}]
8f:["$","span",null,{"className":"hljs-property","children":"id"}]
90:["$","span",null,{"className":"hljs-property","children":"id"}]
91:["$","span",null,{"className":"hljs-keyword","children":"else"}]
92:["$","span",null,{"className":"hljs-keyword","children":"if"}]
93:["$","span",null,{"className":"hljs-property","children":"length"}]
94:["$","span",null,{"className":"hljs-number","children":"7"}]
95:["$","span",null,{"className":"hljs-keyword","children":"await"}]
96:["$","span",null,{"className":"hljs-title function_","children":"setNotices"}]
97:["$","span",null,{"className":"hljs-title function_","children":"slice"}]
98:["$","span",null,{"className":"hljs-number","children":"0"}]
99:["$","span",null,{"className":"hljs-number","children":"6"}]
9a:["$","span",null,{"className":"hljs-keyword","children":"else"}]
9b:["$","span",null,{"className":"hljs-keyword","children":"await"}]
9c:["$","span",null,{"className":"hljs-title function_","children":"setNotices"}]
